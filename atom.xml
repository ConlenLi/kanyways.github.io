<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>懒人屋</title>
  
  <subtitle>思想和境界一直在倒退的小虫</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://kany.me/"/>
  <updated>2019-10-22T04:16:38.966Z</updated>
  <id>https://kany.me/</id>
  
  <author>
    <name>Kany.Wang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>软件的Key</title>
    <link href="https://kany.me/2019/10/22/soft-keys/"/>
    <id>https://kany.me/2019/10/22/soft-keys/</id>
    <published>2019-10-22T04:12:13.000Z</published>
    <updated>2019-10-22T04:16:38.966Z</updated>
    
    <content type="html"><![CDATA[<h2 id="软件背景"><a href="#软件背景" class="headerlink" title="软件背景"></a>软件背景</h2><blockquote><p>没有什么背景，只是想分享一下而已</p></blockquote><h2 id="Charles-青花瓷"><a href="#Charles-青花瓷" class="headerlink" title="Charles(青花瓷)"></a>Charles(青花瓷)</h2><pre class="line-numbers language-bash"><code class="language-bash">用户名：https://kany.me序列号：46fb847a7daf78ee11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><a id="more"></a><h2 id="WinRar-5-x-x"><a href="#WinRar-5-x-x" class="headerlink" title="WinRar(5.x.x)"></a>WinRar(5.x.x)</h2><blockquote><p>将文件保存成<strong>rarreg.key</strong></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash">RAR registration datahttps://kany.meUnlimited Company LicenseUID<span class="token operator">=</span>a9f1d30e13c168865d5464122122505d5453a37f84fd6cc174aaa975a770a5b063e19d9eeed5fb3c295a0a17441ed460fce6cb5ffde62890079861be576387177131ced835ed65cc743d9777f2ea71a8e32c7e593cf66794343565b41bcf56929486b8bcdac33d50ecf77399602d73a67392b92ce7c1e3c80a006e5ad4c350f13f8b0904263464a0b7acf3d277c581811d1da3f0fa5e6c4319447fade6c82322b6bd96bee8f43b30ab6041630eb4afa8989b0eaa53054b3985cae27c7e04cfa248001932106284<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;软件背景&quot;&gt;&lt;a href=&quot;#软件背景&quot; class=&quot;headerlink&quot; title=&quot;软件背景&quot;&gt;&lt;/a&gt;软件背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;没有什么背景，只是想分享一下而已&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Charles-青花瓷&quot;&gt;&lt;a href=&quot;#Charles-青花瓷&quot; class=&quot;headerlink&quot; title=&quot;Charles(青花瓷)&quot;&gt;&lt;/a&gt;Charles(青花瓷)&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;用户名：https://kany.me
序列号：46fb847a7daf78ee11&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
    
    
      <category term="charles" scheme="https://kany.me/tags/charles/"/>
    
      <category term="key" scheme="https://kany.me/tags/key/"/>
    
      <category term="keygen" scheme="https://kany.me/tags/keygen/"/>
    
  </entry>
  
  <entry>
    <title>Docker Compose 部署 Redis 及原理讲解</title>
    <link href="https://kany.me/2019/10/16/docker-compose-redis/"/>
    <id>https://kany.me/2019/10/16/docker-compose-redis/</id>
    <published>2019-10-16T06:48:11.000Z</published>
    <updated>2019-10-17T10:11:57.225Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>Redis是我们常用的一个NoSql的数据库，我个人在开发中也经常使用。<br>目前算是一个比较常用的工具了，我个人经常安装是单机版的，也没有什么集群的思想在里面，这篇文章的意思是自己在配置集群过程中的一点记录。<br>文章中的大部分内容算是抄袭的，如有侵权，可留言删除。原文链接在参考资料当中。<br>本文很长，没有耐心的直接右下角目录选择自己想看的部分。</p></blockquote><h2 id="Redis的集群方式"><a href="#Redis的集群方式" class="headerlink" title="Redis的集群方式"></a>Redis的集群方式</h2><blockquote><p>在网络搜索资料的时候看到 <strong><a href="https://www.cnblogs.com/51life" target="_blank" rel="noopener">51life</a></strong> 的文章中写到目前Redis的集群方式有三种，我个人目前也没有进行什么深入的理解，先直接抄袭然后再去研究是不是如文章中所说的</p><ul><li>主从复制</li><li>哨兵模式</li><li>Redis-Cluster集群</li></ul></blockquote><a id="more"></a><h3 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h3><blockquote><p>主从复制的，从名称上就可以看出来有一个主库一个从库，数据上应该是一致的。一般可以用来做数据备份等。在2.8之前和之后有<strong>SYNC</strong>和<strong>PSYNC</strong>的区别<br>需要持续了解的请查看<a href="https://www.cnblogs.com/amei0/p/8177076.html" target="_blank" rel="noopener">Redis（二）集群 redis-cluster &amp; redis主从同步</a></p></blockquote><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><ul><li>从服务器连接主服务器，发送SYNC命令； </li><li>主服务器接收到SYNC命名后，开始执行BGSAVE命令生成RDB文件并使用缓冲区记录此后执行的所有写命令； </li><li>主服务器BGSAVE执行完后，向所有从服务器发送快照文件，并在发送期间继续记录被执行的写命令； </li><li>从服务器收到快照文件后丢弃所有旧数据，载入收到的快照； </li><li>主服务器快照发送完毕后开始向从服务器发送缓冲区中的写命令； </li><li>从服务器完成对快照的载入，开始接收命令请求，并执行来自主服务器缓冲区的写命令；<strong>（从服务器初始化完成）</strong></li><li>主服务器每执行一个写命令就会向从服务器发送相同的写命令，从服务器接收并执行收到的写命令。<strong>（从服务器初始化完成后的操作）</strong></li></ul><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul><li>支持主从复制，主机会自动将数据同步到从机，可以进行读写分离；</li><li>为了分载Master的读操作压力，Slave服务器可以为客户端提供只读操作的服务，写服务仍然必须由Master来完成；</li><li>Slave同样可以接受其它Slaves的连接和同步请求，这样可以有效的分载Master的同步压力；</li><li>Master Server是以非阻塞的方式为Slaves提供服务。所以在Master-Slave同步期间，客户端仍然可以提交查询或修改请求；</li><li>Slave Server同样是以非阻塞的方式完成数据同步。在同步期间，如果有客户端提交查询请求，Redis则返回同步之前的数据。</li></ul><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul><li>Redis不具备自动容错和恢复功能，主机从机的宕机都会导致前端部分读写请求失败，需要等待机器重启或者手动切换前端的IP才能恢复。</li><li>主机宕机，宕机前有部分数据未能及时同步到从机，切换IP后还会引入数据不一致的问题，降低了系统的可用性。</li><li>Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。</li></ul><h3 id="哨兵模式"><a href="#哨兵模式" class="headerlink" title="哨兵模式"></a>哨兵模式</h3><blockquote><p>当主服务器中断服务后，可以将一个从服务器升级为主服务器，以便继续提供服务，但是这个过程需要人工手动来操作。<br>为此，Redis 2.8中提供了哨兵工具来实现自动化的系统监控和故障恢复功能。<br>哨兵的作用就是监控Redis系统的运行状况。它的功能包括以下两个：</p><ul><li>监控主服务器和从服务器是否正常运行；</li><li>主服务器出现故障时自动将从服务器转换为主服务器。</li></ul></blockquote><h4 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h4><ul><li>每个Sentinel（哨兵）进程以每秒钟一次的频率向整个集群中的Master主服务器，Slave从服务器以及其他Sentinel（哨兵）进程发送一个 PING 命令。</li><li>如果一个实例（instance）距离最后一次有效回复 PING 命令的时间超过 down-after-milliseconds 选项所指定的值， 则这个实例会被 Sentinel（哨兵）进程标记为主观下线（SDOWN）</li><li>如果一个Master主服务器被标记为主观下线（SDOWN），则正在监视这个Master主服务器的所有 Sentinel（哨兵）进程要以每秒一次的频率确认Master主服务器的确进入了主观下线状态</li><li>当有足够数量的 Sentinel（哨兵）进程（大于等于配置文件指定的值）在指定的时间范围内确认Master主服务器进入了主观下线状态（SDOWN）， 则Master主服务器会被标记为客观下线（ODOWN）</li><li>在一般情况下， 每个 Sentinel（哨兵）进程会以每 10 秒一次的频率向集群中的所有Master主服务器、Slave从服务器发送 INFO 命令。</li><li>当Master主服务器被 Sentinel（哨兵）进程标记为客观下线（ODOWN）时，Sentinel（哨兵）进程向下线的 Master主服务器的所有 Slave从服务器发送 INFO 命令的频率会从 10 秒一次改为每秒一次。</li><li>若没有足够数量的 Sentinel（哨兵）进程同意 Master主服务器下线， Master主服务器的客观下线状态就会被移除。若 Master主服务器重新向 Sentinel（哨兵）进程发送 PING 命令返回有效回复，Master主服务器的主观下线状态就会被移除。</li></ul><h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul><li>哨兵模式是基于主从模式的，所有主从的优点，哨兵模式都具有；</li><li>主从可以自动切换，系统更健壮，可用性更高。</li></ul><h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><ul><li>Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。</li></ul><h3 id="Redis-Cluster集群"><a href="#Redis-Cluster集群" class="headerlink" title="Redis-Cluster集群"></a>Redis-Cluster集群</h3><blockquote><p>redis的哨兵模式基本已经可以实现高可用，读写分离，但是在这种模式下每台redis服务器都存储相同的数据，很浪费内存，所以在redis3.0上加入了cluster模式，实现的redis的分布式存储，也就是说每台redis节点上存储不同的内容。</p></blockquote><p><strong>Redis-Cluster采用无中心结构,它的特点如下：</strong></p><ul><li>所有的redis节点彼此互联(PING-PONG机制),内部使用二进制协议优化传输速度和带宽；</li><li>节点的fail是通过集群中超过半数的节点检测失效时才生效；</li><li>客户端与redis节点直连,不需要中间代理层.客户端不需要连接集群所有节点,连接集群中任何一个可用节点即可。</li></ul><h4 id="工作方式-1"><a href="#工作方式-1" class="headerlink" title="工作方式"></a>工作方式</h4><p> 在redis的每一个节点上，都有这么两个东西，一个是插槽（slot），它的的取值范围是：0-16383。<br> 还有一个就是cluster，可以理解为是一个集群管理的插件。<br> 当我们的存取的key到达的时候，redis会根据crc16的算法得出一个结果，然后把结果对16384求余数，这样每个key都会对应一个编号在0-16383之间的哈希槽，通过这个值，去找到对应的插槽所对应的节点，然后直接自动跳转到这个对应的节点上进行存取操作。<br> 为了保证高可用，redis-cluster集群引入了主从模式，一个主节点对应一个或者多个从节点，当主节点宕机的时候，就会启用从节点。<br> 当其它主节点ping一个主节点A时，如果半数以上的主节点与A通信超时，那么认为主节点A宕机了。<br> 如果主节点A和它的从节点A1都宕机了，那么该集群就无法再提供服务了。</p><h2 id="Redis之缓存穿透、缓存击穿与缓存雪崩"><a href="#Redis之缓存穿透、缓存击穿与缓存雪崩" class="headerlink" title="Redis之缓存穿透、缓存击穿与缓存雪崩"></a>Redis之缓存穿透、缓存击穿与缓存雪崩</h2><blockquote><p>为什么要将这个放置到这里呢？这个是在面试的时候经常遇到的，且在我们安装或者配置Redis的配置文件时起到决定作用。<br>这里依然要感谢作者 <strong><a href="https://www.cnblogs.com/51life" target="_blank" rel="noopener">51life</a></strong>，说的直白点，如果他不写，我怎么抄袭？<br>开玩笑的，这个东西是方便自己学习的，参考资料中也有他原文的链接。</p></blockquote><h3 id="缓存穿透"><a href="#缓存穿透" class="headerlink" title="缓存穿透"></a>缓存穿透</h3><blockquote><p>缓存穿透，是指查询一个不存在的数据，由于数据不存在，所以数据不会被缓存，每次查询都是从数据库中去查询。<br>如果有人利用这个存在的漏洞去伪造大量的请求，那么很可能导致DB承受不了那么大的流量就挂掉了。</p></blockquote><h4 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a><strong>解决方案：</strong></h4><ul><li>事前预防：对所有请求进行参数校验（页面或者接口中），拒绝非法请求；</li><li>事后预防：当查询到一个空的结果时，我们仍然将这个空的结果进行缓存，但是设置一个很短的过期时间。</li></ul><h3 id="缓存击穿"><a href="#缓存击穿" class="headerlink" title="缓存击穿"></a>缓存击穿</h3><blockquote><p>缓存击穿，就是在热点key失效的瞬间，海量的请求访问数据库，导致数据库崩溃。</p></blockquote><h4 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a><strong>解决方案：</strong></h4><ul><li>互斥锁：是在缓存KEY过期去更新的时候，先让程序去获取锁，只有获取到锁的线程才有资格去更新缓存KEY。其他没有获取到锁的线程则休眠片刻之后再次去获取最新的缓存数据。通过这种方式，同一时刻永远只有一个线程会去读取数据库，这样也就避免了海量数据库请求对于数据库的冲击。</li><li>永不过期：将缓存设置为永不过期，通过定时任务去同步缓存和数据库的数据。</li></ul><h3 id="缓存雪崩"><a href="#缓存雪崩" class="headerlink" title="缓存雪崩"></a>缓存雪崩</h3><blockquote><p>缓存雪崩，是指我们设置缓存时采用了相同的过期时间，导致很多key在某一时刻同时失效，请求全部转发到数据库，最终导致数据库瞬时压力过大而崩溃。</p></blockquote><h4 id="解决方案：-2"><a href="#解决方案：-2" class="headerlink" title="解决方案："></a><strong>解决方案：</strong></h4><ul><li>在原有失效时间的基础上增加一个随机时间（例如1-5分钟），这样每个缓存过期时间的重复率就会降低，从而减少缓存雪崩的发生。</li></ul><p><strong>总结：</strong>缓存穿透是业务层面的漏洞导致非法请求，与请求量、缓存失效没关系。缓存击穿则只会出现在热点数据上，发生在缓存失效的瞬间，与业务没多大关系。缓存雪崩则是因为多个 KEY 同时失效，导致数据库请求太多。非热点数据也会导致缓存雪崩，只要同时失效的 KEY 足够多。</p><h2 id="Redis的配置说明"><a href="#Redis的配置说明" class="headerlink" title="Redis的配置说明"></a>Redis的配置说明</h2><blockquote><p>看到上面的资料之后应该很多人明白了怎么去选择Redis的集群方式，那么现在我们来抄袭<strong>“<a href="https://blog.csdn.net/shaonianbz/article/details/80210069" target="_blank" rel="noopener">Redis的集群与主从复制（附Redis持久化）</a>”</strong>一文中对配置文件的讲解。<br>如果想要了解更多，请查看<a href="https://www.cnblogs.com/amei0/p/8118739.html" target="_blank" rel="noopener">Redis（一） 数据结构与底层存储 &amp; 事务 &amp; 持久化 &amp; lua</a>，这比较全面</p></blockquote><h3 id="Redis持久化"><a href="#Redis持久化" class="headerlink" title="Redis持久化"></a>Redis持久化</h3><blockquote><p>Redis默认的方式，redis通过快照来将数据持久化到磁盘中。</p></blockquote><p>设置持久化快照的条件：在redis.conf中修改持久化快照的条件，如下：</p><pre class="line-numbers language-bash"><code class="language-bash">save 900 1 <span class="token comment" spellcheck="true"># 900秒内操作1次，将数据写入磁盘</span>save 300 10 <span class="token comment" spellcheck="true"># 300秒内操作10次，将数据写入磁盘</span>save 60 10000 <span class="token comment" spellcheck="true"># 60秒内操作10000次，将数据写入磁盘</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>持久化文件存储的目录：在redis.conf中可以指定持久化文件存储的目录：</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 当持久化出现错误之后，是否继续提供写服务</span>stop-writes-on-bgsave-error no<span class="token comment" spellcheck="true"># 写的时候是否压缩</span>rdbcompression <span class="token function">yes</span><span class="token comment" spellcheck="true"># 数据存储到磁盘上的文件名称</span>dbfilename dump.rdb<span class="token comment" spellcheck="true"># 存储数据的目录，这是相对于当前执行目录的</span><span class="token function">dir</span> ./<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一旦redis被非法关闭，那么会丢失最后一次持久化之后的数据。如果数据不重要的情况，可以不必理会。但数据不能丢失需要开启redis的aof。<br><strong>实际在项目中也是两个一起使用的。</strong></p><h3 id="AOF方式"><a href="#AOF方式" class="headerlink" title="AOF方式"></a>AOF方式</h3><p>Redis默认是不使用该方式持久化的。Aof方式的持久化，是操作一次redis数据库，则将该操作的记录存储到aof持久化文件中。</p><p>开启aof方式的持久化方案：</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># AOF的开关</span>appendonly no<span class="token comment" spellcheck="true"># AOF文件的名字</span>appendfilename <span class="token string">"appendonly.aof"</span><span class="token comment" spellcheck="true"># 控制Redis调用fsync的频率（fsync：将数据从缓冲区写到磁盘）</span>appendfsync everysec<span class="token comment" spellcheck="true"># 控制当执行重写时是否阻止调用fsync</span>no-appendfsync-on-rewrite no<span class="token comment" spellcheck="true"># 用于控制AOF文件的自动重写规则</span>auto-aof-rewrite-percentage 100<span class="token comment" spellcheck="true"># 用于控制AOF重写的最小文件大小。</span>auto-aof-rewrite-min-size  64mb<span class="token comment" spellcheck="true"># 当aof-load-truncated被设置为yes时，Redis发现了问题之后会从AOF文件中尽可能地加载更多的数据</span><span class="token comment" spellcheck="true"># 然后在log文件里记录这次错误。</span>aof-load-truncated <span class="token function">yes</span><span class="token comment" spellcheck="true"># 配置AOF文件保存的路径。RDB产生的文件也会被保存到这个路径下面</span><span class="token function">dir</span> ./<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>appendfsync的三种模式：</strong></p><ul><li><strong>no</strong>：从不调用fsync，由操作系统自行决定什么时候将缓冲区里的数据写入文件。大多数Linux系统是每30秒进行一次。这种模式的速度最快，效率最高，但是不能保证数据安全。</li><li><strong>always</strong>：每次执行写操作之后都调用fsync。这种模式最慢，但也是最安全的，可以保证出错时最多只损失一次操作。这种模式由于不断地写入少量数据，会严重缩短固态硬盘的寿命。</li><li><strong>everysec</strong>：每一秒调用一次fsync。是一种折中的方案，也是配置文件的默认值。当fsync调用时长超过一秒时，Redis会延迟下一次fsync的调用到下一秒。</li></ul><h4 id="AOF的优点："><a href="#AOF的优点：" class="headerlink" title="AOF的优点："></a>AOF的优点：</h4><p>AOF可以将数据的损失降到最低</p><h4 id="AOF的缺点："><a href="#AOF的缺点：" class="headerlink" title="AOF的缺点："></a>AOF的缺点：</h4><p>比RDB更占用存储空间、加载速度慢（一是因为存储的命令较多，二是因为编码格式与内存不一致，还需要处理编码）</p><h2 id="Docker-配置-Redis-哨兵集群"><a href="#Docker-配置-Redis-哨兵集群" class="headerlink" title="Docker 配置 Redis 哨兵集群"></a>Docker 配置 Redis 哨兵集群</h2><p>这里没有配置存放磁盘保存什么的，正常是需要配置的。</p><h3 id="主从模式"><a href="#主从模式" class="headerlink" title="主从模式"></a>主从模式</h3><p>配置文件如下：</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 版本</span>version: <span class="token string">'3.1'</span><span class="token comment" spellcheck="true"># 服务配置</span>services:  <span class="token comment" spellcheck="true"># RedisMaster配置</span>  master:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-master    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-server --port 6379 --requirepass 密码    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 6379:6379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      redis:        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        ipv4_address: 172.18.1.2  slave1:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-slave-6380    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-server --slaveof 172.18.1.2 6379 --port 6380 --requirepass 密码 --masterauth 密码    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 6380:6379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      redis:        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        ipv4_address: 172.18.1.3  slave2:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-slave-6381    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-server --slaveof 172.18.1.2 6379 --port 6381 --requirepass 密码 --masterauth 密码    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 6381:6379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      redis:        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        ipv4_address: 172.18.1.4<span class="token comment" spellcheck="true">#定义网络组</span>networks:  <span class="token comment" spellcheck="true"># 网络组名称</span>  redis:    <span class="token comment" spellcheck="true"># 网络的模式</span>    driver: bridge    <span class="token comment" spellcheck="true"># 配置网络</span>    ipam:      driver: default      config:        <span class="token comment" spellcheck="true">## ip地址网络 这里宿主机一般会是该网段的 172.18.1.1,所以不要设置自网段为1</span>        - subnet: 172.18.1.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Sentinel"><a href="#Sentinel" class="headerlink" title="Sentinel"></a>Sentinel</h3><pre class="line-numbers language-bash"><code class="language-bash">port 26379<span class="token function">dir</span> <span class="token string">"/tmp"</span><span class="token comment" spellcheck="true"># 自定义集群名，其中 127.0.0.1 为 redis-master 的 ip，6379 为 redis-master 的端口，2 为最小投票数（因为有 3 台 Sentinel 所以可以设置成 2）</span>sentinel monitor mymaster 172.18.1.2 6379 2sentinel down-after-milliseconds mymaster 30000sentinel parallel-syncs mymaster 1sentinel auth-pass mymaster 密码sentinel failover-timeout mymaster 180000sentinel deny-scripts-reconfig <span class="token function">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>记得复制三份文件。</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 版本</span>version: <span class="token string">'3.1'</span><span class="token comment" spellcheck="true"># 服务配置</span>services:  <span class="token comment" spellcheck="true"># sentinel配置</span>  sentinel-1:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-sentinel-1    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 文件夹映射</span>    volumes:      - ./sentinel1.conf:/usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-sentinel /usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 26379:26379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      - redis  sentinel-2:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-sentinel-2    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 文件夹映射</span>    volumes:      - ./sentinel2.conf:/usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-sentinel /usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 26380:26379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      - redis  sentinel-3:    <span class="token comment" spellcheck="true"># 镜像名称</span>    image: redis    <span class="token comment" spellcheck="true"># 容器名称</span>    container_name: redis-sentinel-3    <span class="token comment" spellcheck="true"># 是否开机启动</span>    restart: always    <span class="token comment" spellcheck="true"># 文件夹映射</span>    volumes:      - ./sentinel3.conf:/usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 执行命令</span>    command: redis-sentinel /usr/local/etc/redis/sentinel.conf    <span class="token comment" spellcheck="true"># 端口映射</span>    ports:      - 26381:26379    networks:      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      - redisnetworks:  redis:    external:      name: redis_redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.cnblogs.com/51life/p/10233340.html" target="_blank" rel="noopener">redis的三种集群方式</a></li><li><a href="https://blog.csdn.net/q649381130/article/details/79931791" target="_blank" rel="noopener">redis：详解三种集群策略</a></li><li><a href="https://www.cnblogs.com/51life/p/10232976.html" target="_blank" rel="noopener">缓存穿透、缓存击穿与缓存雪崩</a></li><li><a href="https://www.cnblogs.com/amei0/p/8118739.html" target="_blank" rel="noopener">Redis（一） 数据结构与底层存储 &amp; 事务 &amp; 持久化 &amp; lua</a></li><li><a href="https://www.cnblogs.com/amei0/p/8177076.html" target="_blank" rel="noopener">Redis（二）集群 redis-cluster &amp; redis主从同步</a></li><li><a href="https://blog.csdn.net/imxiangzi/article/details/52400877" target="_blank" rel="noopener">Redis主从复制总结整理</a></li><li><a href="https://blog.csdn.net/qq_15204179/article/details/84099735" target="_blank" rel="noopener">Redis集群的搭建与主从复制，redis-cluster</a></li><li><a href="https://blog.csdn.net/ztsinghua/article/details/48134377" target="_blank" rel="noopener">Codis作者黄东旭细说分布式Redis架构设计和踩过的那些坑们</a></li><li><a href="https://blog.csdn.net/shaonianbz/article/details/80210069" target="_blank" rel="noopener">Redis的集群与主从复制（附Redis持久化）</a></li><li><a href="https://blog.csdn.net/qq_35946990/article/details/78957618" target="_blank" rel="noopener">Redis-使用redis-trib构建集群</a></li><li><a href="https://www.cnblogs.com/dukuan/p/10119348.html" target="_blank" rel="noopener">Redis主从同步及哨兵原理</a></li><li><a href="https://blog.csdn.net/weixin_41622183/article/details/86600515" target="_blank" rel="noopener">docke实战篇（五）–docker-compose搭建redis哨兵集群</a></li><li>[]</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Redis是我们常用的一个NoSql的数据库，我个人在开发中也经常使用。&lt;br&gt;目前算是一个比较常用的工具了，我个人经常安装是单机版的，也没有什么集群的思想在里面，这篇文章的意思是自己在配置集群过程中的一点记录。&lt;br&gt;文章中的大部分内容算是抄袭的，如有侵权，可留言删除。原文链接在参考资料当中。&lt;br&gt;本文很长，没有耐心的直接右下角目录选择自己想看的部分。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Redis的集群方式&quot;&gt;&lt;a href=&quot;#Redis的集群方式&quot; class=&quot;headerlink&quot; title=&quot;Redis的集群方式&quot;&gt;&lt;/a&gt;Redis的集群方式&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在网络搜索资料的时候看到 &lt;strong&gt;&lt;a href=&quot;https://www.cnblogs.com/51life&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;51life&lt;/a&gt;&lt;/strong&gt; 的文章中写到目前Redis的集群方式有三种，我个人目前也没有进行什么深入的理解，先直接抄袭然后再去研究是不是如文章中所说的&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主从复制&lt;/li&gt;
&lt;li&gt;哨兵模式&lt;/li&gt;
&lt;li&gt;Redis-Cluster集群&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="docker-compose" scheme="https://kany.me/tags/docker-compose/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
      <category term="redis" scheme="https://kany.me/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>源码编译Redis Desktop Manager</title>
    <link href="https://kany.me/2019/10/10/compile-redis-desktop-manager/"/>
    <id>https://kany.me/2019/10/10/compile-redis-desktop-manager/</id>
    <published>2019-10-10T09:08:35.000Z</published>
    <updated>2019-10-11T03:53:36.616Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>本文其实也是在博客的基础上迁移过来的，在文章中也给出了怎么去编译的地址。<strong>Redis Desktop Manager</strong>这个软件的作者虽然有订阅版，但是他没有取消源码的下载，<br>只是源码编译起来有点复杂，对于不一般的用户是无法完成编译的。本文的目的是让用户能自己完成编译环境的安装以及成功编译软件。<br><font color="lightcoral">重要说明：本文不提供含SSH Tunnel的编译方法，有需要的人请查阅本文参考资料。相信很多人都只是想要下载软件对编译一点兴趣都没有。所以本文中的关键信息基本一笔带过，或者没有写。真的想要了解的欢迎评论探讨。</font></p></blockquote><a id="more"></a><h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><ul><li>OS：win10 1903</li><li>OS：macOS Mojave 10.14.4</li><li>Xcode：10.1</li><li><a href="http://qt.mirror.constant.com/archive/qt/" target="_blank" rel="noopener">QT：5.9.8  文件大小 3G，请认真对待</a></li><li><a href="https://github.com/uglide/RedisDesktopManager" target="_blank" rel="noopener">Source：rdm 2019.3</a></li></ul><h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><blockquote><p>Windows下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">git</span> clone --recursive https://github.com/uglide/RedisDesktopManager.git E:\rdm2019<span class="token function">cd</span> E:\rdm2019<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>macOS下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 到下载目录</span><span class="token function">cd</span> ~/Downloads<span class="token function">git</span> clone --recursive https://github.com/uglide/RedisDesktopManager.git rdm2019<span class="token function">cd</span> rdm2019<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置版本"><a href="#设置版本" class="headerlink" title="设置版本"></a>设置版本</h2><blockquote><p>windows下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> E:\rdm2019<span class="token keyword">set</span> VERSION<span class="token operator">=</span>2019.4.0python ./build/utils/set_version.py %VERSION% <span class="token operator">></span> ./src/version.hpython ./build/utils/set_version.py %VERSION% <span class="token operator">></span> ./3rdparty/crashreporter/src/version.heg.D:\Tools\Python37\python.exe ./build/utils/set_version.py 2019.4.0 <span class="token operator">></span> ./src/version.hD:\Tools\Python37\python.exe ./build/utils/set_version.py 2019.4.0 <span class="token operator">></span> ./3rdparty/crashreporter/src/version.h<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>macOS下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> ~/Downloads/rdm2019python ./build/utils/set_version.py 2019.4.0 <span class="token operator">></span> ./src/version.hpython ./build/utils/set_version.py 2019.4.0 <span class="token operator">></span> ./3rdparty/crashreporter/src/version.h<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Win下环境准备"><a href="#Win下环境准备" class="headerlink" title="Win下环境准备"></a>Win下环境准备</h2><blockquote><p>windows下的软件手动安装的要多点，不像macOS一个命令可以搞定。我个人是将<strong>QT、CMake、NSIS、Python3、OpenSSL</strong>等文件安装到<strong>D:\Tools</strong>或者<strong>E:\Tools</strong>下<br>软件安装可以根据个人习惯，不强制要求。</p></blockquote><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul><li>Visual Studio 2017 Community Edition</li><li>QT：到 <a href="http://mirrors.ustc.edu.cn/qtproject/archive/qt/5.9/" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/qtproject/archive/qt/5.9/</a> 下载最新到 Qt 5.9 版本，一直下一步就行，大约半个小时左右。</li><li>CMake：到<a href="https://cmake.org/download/" target="_blank" rel="noopener">https://cmake.org/download/</a> 下载 32 位的版本，安装时注意勾选添加到 PATH</li><li>NSIS：安装打包工具 <a href="http://nsis.sourceforge.net/Download" target="_blank" rel="noopener">http://nsis.sourceforge.net/Download</a> 注意下载3的版本</li><li>Python3：到 <a href="https://www.python.org/downloads/" target="_blank" rel="noopener">https://www.python.org/downloads/</a> 下载安装 Python 3.7.x</li><li>OpenSSL：下载并安装<a href="http://slproweb.com/download/Win64OpenSSL-1_0_2t.exe" target="_blank" rel="noopener">Win 64 OpenSSL 1.0.x</a>，文中用到的是<a href="http://slproweb.com/download/Win64OpenSSL-1_0_2t.exe" target="_blank" rel="noopener">Win64OpenSSL-1_0_2t</a></li><li>Nuget：此文件用来下载一个依赖包，<a href="https://dist.nuget.org/win-x86-commandline/latest/nuget.exe" target="_blank" rel="noopener">下载地址</a></li></ul><blockquote><p>OpenSSL的网址：<a href="http://slproweb.com/products/Win32OpenSSL.html" target="_blank" rel="noopener">http://slproweb.com/products/Win32OpenSSL.html</a><br>怎么安装软件我就不说了，相信能手动编译的人都有这个能力安装的</p></blockquote><p><font color="lightcoral"><strong>注意</strong>：QT安装的时候除了要选择Qt Creator外，还要选择至少如下图所示组件：</font></p><p><img src="/assets/images/rdm/0001.jpg" alt="windows安装QT"></p><h3 id="下载依赖包"><a href="#下载依赖包" class="headerlink" title="下载依赖包"></a>下载依赖包</h3><blockquote><p>根据官方文档中的描述，要使用Nuget下载<strong>zlib-msvc14-x64.1.2.11.7795</strong></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> E:\rdm2019<span class="token function">cd</span> 3rdparty/nuget <span class="token function">install</span> zlib-msvc14-x64 -Version 1.2.11.7795<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="配置SSL的路径"><a href="#配置SSL的路径" class="headerlink" title="配置SSL的路径"></a>配置SSL的路径</h3><blockquote><p>安装好OpenSSL之后可能要修改路径，之前提到我个人是安装在<strong>D:\Tools\OpenSSL-Win64</strong>下的。</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 打开 3rdparty\3rdparty.pri</span><span class="token comment" spellcheck="true"># 修改 OPENSSL_LIB_PATH = C:\OpenSSL-Win64\lib\VC 为真实的路径即可</span>OPENSSL_LIB_PATH <span class="token operator">=</span> D:\Tools\OpenSSL-Win64\lib\VC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="安装Python3"><a href="#安装Python3" class="headerlink" title="安装Python3"></a>安装Python3</h3><blockquote><p>官方文档中提醒各位是安装在<strong>C:\Python37-x64</strong>，可能有部分小伙伴已经安装好了Python。我们可以修改一个文件即可。</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 打开 3rdparty\pyotherside.pri</span><span class="token comment" spellcheck="true"># 修改Python的路径为真实路径即可：</span>    QMAKE_LIBS +<span class="token operator">=</span> -LD:\Tools\Python37\libs -lpython37    INCLUDEPATH +<span class="token operator">=</span> D:\Tools\Python37\include\<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="编译crashreporter"><a href="#编译crashreporter" class="headerlink" title="编译crashreporter"></a>编译crashreporter</h3><blockquote><p>这个文件编译需要使用到<strong>powershell</strong>的<strong>replace</strong>方法，并且<strong>编译crashreporter</strong>编译时是必须存在的，不然无法编译<br>使用“适用于 VS 2017 的 x86_x64 兼容工具命令提示”进行操作：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 进入文件夹</span><span class="token function">cd</span> E:\rdm2019\3rdparty\crashreporter<span class="token comment" spellcheck="true"># 设定编译环境</span><span class="token string">"E:\Tools\Qt5.9.8\5.9.8\msvc2017_64\bin\qmake.exe"</span> CONFIG+<span class="token operator">=</span>release DESTDIR<span class="token operator">=</span>E:\rdm2019\bin\windows\release<span class="token comment" spellcheck="true"># 配置编译脚本的参数</span>powershell -Command <span class="token string">"(Get-Content Makefile.Release).replace('DEFINES       =','DEFINES       = -DAPP_NAME=\\\"RedisDesktopManager\\\" -DAPP_VERSION=\\\""</span>%VERSION%<span class="token string">"\\\" -DCRASH_SERVER_URL=\\\"https://oops.redisdesktop.com/crash-report\\\"')"</span> <span class="token operator">></span> Makefile.Release2eg.powershell -Command <span class="token string">"(Get-Content Makefile.Release).replace('DEFINES       =','DEFINES       = -DAPP_NAME=\\\"RedisDesktopManager\\\" -DAPP_VERSION=\\\""</span>2019.4.0<span class="token string">"\\\" -DCRASH_SERVER_URL=\\\"https://oops.redisdesktop.com/crash-report\\\"')"</span> <span class="token operator">></span> Makefile.Release2<span class="token comment" spellcheck="true"># 这个地方一定要使用VS的本机命令行工具提示符</span>nmake -f Makefile.Release2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="修改-hiredis"><a href="#修改-hiredis" class="headerlink" title="修改 hiredis"></a>修改 hiredis</h3><blockquote><p>由于win下的软件和其他的平台的C的语法区别需要合并补丁</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> E:\rdm2019\3rdparty\qredisclient\3rdparty\hiredis<span class="token function">git</span> apply <span class="token punctuation">..</span>/hiredis-win.patch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="编译主程序"><a href="#编译主程序" class="headerlink" title="编译主程序"></a>编译主程序</h3><p>Qt 编译<br>打开Qt Creator，打开 E:\rdm2019\src\rdm.pro<br>选择 “Deaktop Qt 5.9.6 MSVC2017 64bit”，构建选择 release，点击构建项目。</p><h3 id="构建安装程序"><a href="#构建安装程序" class="headerlink" title="构建安装程序"></a>构建安装程序</h3><blockquote><p>这里主要是用来处理程序是依赖关系，不然只有主程序是不能运行的。</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> E:\rdm2019copy /y .\bin\windows\release\crashreporter.exe .\build\windows\installer\resources\crashreporter.execopy /y .\bin\windows\release\rdm.exe .\build\windows\installer\resources\rdm.exe<span class="token comment" spellcheck="true"># 切换目录</span><span class="token function">cd</span> E:\rdm2019\build\windows\installer\resources<span class="token comment" spellcheck="true"># 优先选择这个</span>E:\Tools\Qt5.9.8\5.9.8\msvc2017_64\bin\windeployqt --no-angle --no-opengl-sw --no-compiler-runtime --no-translations --release --force --qmldir E:\rdm2019\src\qml rdm.exe<span class="token comment" spellcheck="true">#这个好像有垃圾文件</span><span class="token comment" spellcheck="true"># 我也不知道为什么删除</span><span class="token function">rmdir</span> /S /Q .\platforminputcontexts<span class="token function">rmdir</span> /S /Q .\qmltooling<span class="token function">rmdir</span> /S /Q .\QtGraphicalEffectsdel /Q  .\imageformats\qtiff.dlldel /Q  .\imageformats\qwebp.dll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="验证编译程序"><a href="#验证编译程序" class="headerlink" title="验证编译程序"></a>验证编译程序</h3><blockquote><p>由于作者在<strong>2019.4.0</strong>的版本之后加入了<strong>Python</strong>，所以这个地方我们还要下载一个Python的运行环境<strong><a href="https://www.python.org/ftp/python/3.7.4/python-3.7.4-embed-amd64.zip" target="_blank" rel="noopener">python-3.7.4-embed-amd64.zip</a></strong>，至于为什么如下图所示：</p></blockquote><p><img src="/assets/images/rdm/0003.jpg" alt="Python依赖"></p><p><font color="lightcoral"><strong>注意</strong>：我们值需要复制<strong>python37.zip、python37.dll</strong>这两个文件即可。安装了Python环境的电脑机器上不会报错的，但是也不会启动。建议在虚拟机上或者另外的电脑测试。</font></p><h3 id="打包发布程序"><a href="#打包发布程序" class="headerlink" title="打包发布程序"></a>打包发布程序</h3><blockquote><p>经过上面的步骤之后，现在可以顺利发布程序给其他的小伙伴了，开不开心？</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#切换目录</span><span class="token function">cd</span> E:\rdm2019<span class="token comment" spellcheck="true"># 打包安装文件</span>call <span class="token string">"E:\\Tools\\NSIS\\makensis.exe"</span> /V1 /DVERSION<span class="token operator">=</span>%VERSION% ./build/windows/installer/installer.nsieg. call <span class="token string">"E:\\Tools\\NSIS\\makensis.exe"</span> /V1 /DVERSION<span class="token operator">=</span>2019.4.0 ./build/windows/installer/installer.nsi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><font color="lightcoral"><strong>注意</strong>：本次打包出来的程序不支持SSH：</font></p><p><img src="/assets/images/rdm/0002.jpg" alt="SSH提示"></p><h3 id="错误修正"><a href="#错误修正" class="headerlink" title="错误修正"></a>错误修正</h3><blockquote><p>到上面呢基本可以够用了，但是应该有人发现在启动的时候程序窗体会有如下图所示的错误：</p></blockquote><p><img src="/assets/images/rdm/0004.jpg" alt="Python依赖"></p><p>这是因为我们没有安装相关的Python依赖包，安装的方式在官方文档中已经给出了。</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 切换目录 </span><span class="token function">cd</span> E:\rdm2019<span class="token comment" spellcheck="true"># 下载依赖</span>pip <span class="token function">install</span> -r src/py/requirements.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>复制<strong>E:\Tools\Python3\Lib</strong>文件夹，一番操作之后保留如下图所示的文件，记住将<strong>src/py</strong>下的文件也复制过去：</p><pre class="line-numbers language-bash"><code class="language-bash">Lib└─site-packages    ├─cbor    ├─formatters    ├─msgpack    ├─rdb    ├─rdbtools    │  ├─cli    │  └─templates    └─redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/assets/images/rdm/0005.jpg" alt="最终的文件结构"></p><blockquote><p>生成最后的pyc文件，并删除pycache和py的源码文件。使用命令如下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 切换到目录中</span><span class="token function">cd</span> Lib/site-packages/<span class="token comment" spellcheck="true"># 编译pyc</span>python -m compileall -b <span class="token keyword">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><font color="lightcoral"><strong>至此</strong>：<strong>E:\rdm2019\build\windows\installer\resources</strong>文件夹下就有一个Lib目录，最后运行就没有错误啦。相应的格式化功能都有，只是和作者的不一样。</font></p><p><img src="/assets/images/rdm/0006.jpg" alt="格式化模块"></p><h2 id="Mac下环境准备"><a href="#Mac下环境准备" class="headerlink" title="Mac下环境准备"></a>Mac下环境准备</h2><blockquote><p>macOS下我个人感觉相对简单一些，安装好<strong>QT 5.9.x、XCode</strong>之后基本上就可以命令搞定了</p></blockquote><h3 id="准备工作-1"><a href="#准备工作-1" class="headerlink" title="准备工作"></a>准备工作</h3><ul><li>HomeBrew</li><li>使用HomeBrew 安装 openssl 和 cmake</li></ul><p><font color="lightcoral"><strong>注意</strong>：QT安装的时候除了要选择Qt Creator和Charts module以外你还要选择 Mac，这是一个注意点。</font></p><h3 id="编译-crashreporter"><a href="#编译-crashreporter" class="headerlink" title="编译 crashreporter"></a>编译 crashreporter</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">cd</span> 3rdparty/crashreporter <span class="token operator">&amp;&amp;</span> ~/Qt5.9.8/5.9.8/clang_64/bin/qmake DESTDIR<span class="token operator">=</span>./<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/bin/osx/release<span class="token function">vi</span> Makefile<span class="token comment" spellcheck="true"># 修改</span>DEFINES       <span class="token operator">=</span> -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB<span class="token comment" spellcheck="true"># 为：</span>DEFINES       <span class="token operator">=</span> -DAPP_NAME<span class="token operator">=</span>\"RedisDesktopManager\" -DAPP_VERSION<span class="token operator">=</span>\"%VERSION%\" -DCRASH_SERVER_URL<span class="token operator">=</span>\"https://oops.redisdesktop.com/crash-report\" -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DNDEBUG<span class="token comment" spellcheck="true"># eg.    </span>DEFINES       <span class="token operator">=</span> -DAPP_NAME<span class="token operator">=</span>\"RedisDesktopManager\" -DAPP_VERSION<span class="token operator">=</span>\"2019.4.0\" -DCRASH_SERVER_URL<span class="token operator">=</span>\"https://oops.redisdesktop.com/crash-report\" -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -DQT_CORE_LIB -DNDEBUG<span class="token comment" spellcheck="true"># 编译</span><span class="token function">make</span> -s -j 8<span class="token comment" spellcheck="true"># 复制文件到最终目录</span><span class="token comment" spellcheck="true"># mkdir -p ../../bin/osx/release &amp;&amp; mv bin/crashreporter ../../bin/osx/release</span><span class="token comment" spellcheck="true"># 由于已经指定了编译的目录，不会生生成在当前目录，所以不执行上面的语句</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="编译主程序-1"><a href="#编译主程序-1" class="headerlink" title="编译主程序"></a>编译主程序</h3><blockquote><p><font color="lightcoral">注意：这个地方一定要补上<strong>src/configure、build/common_functions</strong></font></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash">./configure <span class="token operator">&amp;&amp;</span> ~/Qt5.9.8/5.9.8/clang_64/bin/qmake CONFIG-<span class="token operator">=</span>debug <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> -s -j 8 <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> <span class="token punctuation">..</span><span class="token comment" spellcheck="true"># 切换目录</span><span class="token function">cd</span> ./bin/osx/release<span class="token comment" spellcheck="true"># 添加QT依赖</span>~/Qt5.9.8/5.9.8/clang_64/bin/macdeployqt rdm.app -qmldir<span class="token operator">=</span><span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">..</span>/src/qml<span class="token comment" spellcheck="true"># 删除非不必要的文件（如果已经做好了Python.framework就不需要了）</span><span class="token function">rm</span> -rf rdm.app/Contents/Frameworks/Python.framework/Versions/3.7/Headers/<span class="token function">rm</span> -rf rdm.app/Contents/Frameworks/Python.framework/Versions/3.7/Resources/<span class="token function">rm</span> -rf rdm.app/Contents/Frameworks/Python.framework/Versions/3.7/bin/<span class="token function">rm</span> -rf rdm.app/Contents/Frameworks/Python.framework/Versions/3.7/include/<span class="token function">rm</span> -rf rdm.app/Contents/Frameworks/Python.framework/Versions/3.7/share/<span class="token comment" spellcheck="true"># 修改文件对系统环境的依赖</span><span class="token comment" spellcheck="true"># 查看依赖</span>otool -L rdm.app/Contents/Frameworks/libssl.1.0.0.dylib<span class="token comment" spellcheck="true"># 替换依赖</span>install_name_tool -change /usr/local/Cellar/openssl/1.0.2r/lib/libcrypto.1.0.0.dylib  @executable_path/<span class="token punctuation">..</span>/Frameworks/libcrypto.1.0.0.dylib rdm.app/Contents/Frameworks/libssl.1.0.0.dylib<span class="token comment" spellcheck="true"># 查看依赖</span>otool -L rdm.app/Contents/MacOS/rdm<span class="token comment" spellcheck="true"># 替换依赖</span>install_name_tool -change /usr/local/opt/python/Frameworks/Python.framework/Versions/3.7/Python @executable_path/<span class="token punctuation">..</span>/Frameworks/Python.framework/Versions/3.7/Python rdm.app/Contents/MacOS/rdm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="成品下载"><a href="#成品下载" class="headerlink" title="成品下载"></a>成品下载</h2><blockquote><p>考虑换到公众号里面去发送信息然后获取下载地址，后面想想算了还是放出来吧。</p></blockquote><ul><li><a href="https://pan.baidu.com/s/1tpjOUgyhni1aZWi6sQklWQ" target="_blank" rel="noopener">百度云密码：k7km</a></li></ul><h2 id="特别感谢"><a href="#特别感谢" class="headerlink" title="特别感谢"></a>特别感谢</h2><ul><li>2019-08-30 感谢<font color="red"><strong>*纯夫</strong></font>童鞋的打赏，感谢肯定。<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2></li><li><a href="http://docs.redisdesktop.com/en/latest/install/" target="_blank" rel="noopener">官方文档</a></li><li><a href="http://ccimage.cn/2019-01/macosx-redis-desktop-manager-build-from-source.html" target="_blank" rel="noopener">Macbook编译Redis Desktop Manager源码步骤及问题解决</a></li><li><a href="https://www.jianshu.com/p/95d218d46d3b" target="_blank" rel="noopener">MAC 下编译 RedisDesktopMmanager 最新版</a></li><li><a href="https://blog.csdn.net/ani_di/article/details/7078743" target="_blank" rel="noopener">解决 “dyld: Library not loaded: ” 错误</a></li><li><a href="https://blog.csdn.net/linuxheik/article/details/74626996" target="_blank" rel="noopener">cmake构建时指定编译器架构</a></li><li><a href="https://blog.csdn.net/sailorhdx/article/details/81538131" target="_blank" rel="noopener">WIN10+QT5.9+VS2015编译RedisDesktopManager</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;本文其实也是在博客的基础上迁移过来的，在文章中也给出了怎么去编译的地址。&lt;strong&gt;Redis Desktop Manager&lt;/strong&gt;这个软件的作者虽然有订阅版，但是他没有取消源码的下载，&lt;br&gt;只是源码编译起来有点复杂，对于不一般的用户是无法完成编译的。本文的目的是让用户能自己完成编译环境的安装以及成功编译软件。&lt;br&gt;&lt;font color=&quot;lightcoral&quot;&gt;重要说明：本文不提供含SSH Tunnel的编译方法，有需要的人请查阅本文参考资料。相信很多人都只是想要下载软件对编译一点兴趣都没有。所以本文中的关键信息基本一笔带过，或者没有写。真的想要了解的欢迎评论探讨。&lt;/font&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="macOS" scheme="https://kany.me/tags/macOS/"/>
    
      <category term="mojave" scheme="https://kany.me/tags/mojave/"/>
    
      <category term="redis" scheme="https://kany.me/tags/redis/"/>
    
      <category term="qt" scheme="https://kany.me/tags/qt/"/>
    
      <category term="rdm" scheme="https://kany.me/tags/rdm/"/>
    
      <category term="Source" scheme="https://kany.me/tags/Source/"/>
    
      <category term="Compile" scheme="https://kany.me/tags/Compile/"/>
    
  </entry>
  
  <entry>
    <title>iPhone手机上安装旧版本App</title>
    <link href="https://kany.me/2019/10/10/iphone-install-old-app/"/>
    <id>https://kany.me/2019/10/10/iphone-install-old-app/</id>
    <published>2019-10-10T08:57:48.000Z</published>
    <updated>2019-10-11T01:48:27.660Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>本文其实在<a href="https://blog.kany.me" target="_blank" rel="noopener">旧博客</a>上有发表的，但是为了完善<strong>Github Pages</strong>所以重新来一遍。</p></blockquote><h2 id="准备软件"><a href="#准备软件" class="headerlink" title="准备软件"></a>准备软件</h2><ul><li><a href="https://baidu.com" target="_blank" rel="noopener">iTunes 12.6.5.3</a></li><li><a href="https://www.telerik.com/fiddler" target="_blank" rel="noopener">Fiddler 安装版</a><a id="more"></a><blockquote><p>旧版博客中有文件下载地址，这里就不提供了，毕竟空间有限。</p></blockquote></li></ul><blockquote><p>本文以QQ安装旧版举例</p></blockquote><h2 id="查询旧版App的版本号"><a href="#查询旧版App的版本号" class="headerlink" title="查询旧版App的版本号"></a>查询旧版App的版本号</h2><p>打开<strong><a href="https://tools.lancely.tech/apple/app-search" target="_blank" rel="noopener">https://tools.lancely.tech/apple/app-search</a></strong>输入QQ</p><p><img src="/assets/images/iphone/0001.jpg" alt="img"></p><p>在iTunes中搜索QQ<br><img src="/assets/images/iphone/0002.png" alt="img"></p><p>按照下文中的资料配置<code>Fiddler</code>，记住要开启HTTPS的代理，在下图红色箭头处输入<code>bpu MZBuy.woa</code>开启拦截。</p><p><img src="/assets/images/iphone/0003.jpg" alt="img"></p><p>最后在iTunes中点击QQ的获取。就完成了。后续的步骤就不写了，很简单的东西。</p><p>本文的意义只是为了不让自己忘记而已。</p><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://tools.lancely.tech/apple/app-search" target="_blank" rel="noopener">查询旧版AppId</a></li><li><a href="https://bbs.feng.com/forum.php?mod=viewthread&tid=11261380" target="_blank" rel="noopener">使用拦截器获取旧版App</a></li><li><a href="https://www.jianshu.com/p/f80d920eecab" target="_blank" rel="noopener">使用拦截器获取旧版App</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;本文其实在&lt;a href=&quot;https://blog.kany.me&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;旧博客&lt;/a&gt;上有发表的，但是为了完善&lt;strong&gt;Github Pages&lt;/strong&gt;所以重新来一遍。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;准备软件&quot;&gt;&lt;a href=&quot;#准备软件&quot; class=&quot;headerlink&quot; title=&quot;准备软件&quot;&gt;&lt;/a&gt;准备软件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://baidu.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;iTunes 12.6.5.3&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.telerik.com/fiddler&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Fiddler 安装版&lt;/a&gt;
    
    </summary>
    
    
    
      <category term="IOS" scheme="https://kany.me/tags/IOS/"/>
    
      <category term="iPhone" scheme="https://kany.me/tags/iPhone/"/>
    
      <category term="iTunes" scheme="https://kany.me/tags/iTunes/"/>
    
      <category term="Fiddler" scheme="https://kany.me/tags/Fiddler/"/>
    
  </entry>
  
  <entry>
    <title>macOS Catalina 安装MySQL 8.0.17解压版本</title>
    <link href="https://kany.me/2019/10/09/macos-catalina-install-mysql/"/>
    <id>https://kany.me/2019/10/09/macos-catalina-install-mysql/</id>
    <published>2019-10-09T13:07:14.000Z</published>
    <updated>2019-10-10T08:56:55.631Z</updated>
    
    <content type="html"><![CDATA[<h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><ul><li>操作系统：macOS Catalina 正式版</li><li>mysql版本：mysql-8.0.17-macos10.14-x86_64.tar.gz<a id="more"></a><h2 id="解压软件"><a href="#解压软件" class="headerlink" title="解压软件"></a>解压软件</h2></li></ul><p>什么解压什么的就不说了，直接将mysql复制到<strong>/usr/local/mysql</strong>下</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 解压到指定文件夹</span><span class="token function">sudo</span> <span class="token function">tar</span> -zxvf ~/Downloads/mysql-8.0.17-macos10.14-x86_64.tar.gz -C /usr/local<span class="token comment" spellcheck="true"># 重命名文件夹为mysql</span><span class="token function">sudo</span> <span class="token function">mv</span> /usr/local/mysql-8.0.17-macos10.14-x86_64 /usr/local/mysql<span class="token comment" spellcheck="true"># 设置文件夹的所属</span><span class="token function">sudo</span> <span class="token function">chown</span> -R root:wheel /usr/local/mysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><blockquote><p>由于某个版本在不存在<strong>my-default.cnf</strong>，所以我们就不能按照之前版本的<strong>support-files/my-default.cnf  /etc/my.cnf</strong></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 创建文件</span><span class="token function">sudo</span> <span class="token function">vi</span> /etc/my.cnf<span class="token comment" spellcheck="true"># 修改文件权限</span><span class="token function">sudo</span> <span class="token function">chmod</span> 664 /etc/my.cnf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>以下为my.cnf的文件内容，由于要支持emoji表情，所以设置格式<strong>utf8mb4</strong></p></blockquote><pre class="line-numbers language-editorconfig"><code class="language-editorconfig">[client]default-character-set = utf8mb4port=3306[mysql]default-character-set = utf8mb4[mysqld]#修改默认执行语句长度max_allowed_packet = 100M#修改GROUP_CONCAT的连接语句长度group_concat_max_len = 204800#默认监听的端口设置port=3306character-set-client-handshake = FALSEcharacter-set-server = utf8mb4collation-server = utf8mb4_unicode_ciinit_connect='SET NAMES utf8mb4'# Remove leading # and set to the amount of RAM for the most important data# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.# innodb_buffer_pool_size = 128M# Remove leading # to turn on a very important data integrity option: logging# changes to the binary log between backups.# log_bin# These are commonly set, remove the # and set as required.# basedir = .....# datadir = .....# port = .....# server_id = .....# socket = .....# Remove leading # to set options mainly useful for reporting servers.# The server defaults are faster for transactions and fast SELECTs.# Adjust sizes as needed, experiment to find the optimal values.# join_buffer_size = 128M# sort_buffer_size = 2M# read_rnd_buffer_size = 2Msql_mode=NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 注意: MySQL 5.7.6 以上版本取消了 scripts 目录, 初始化命令改成了</span><span class="token function">sudo</span> bin/mysqld --initialize --user<span class="token operator">=</span>mysql<span class="token comment" spellcheck="true"># 注意这个时候是有密码出现的。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>注意后面我用的是mysql这个用户，所以创建的文件夹data的用户是mysql的。</p></blockquote><h2 id="启动并修改密码"><a href="#启动并修改密码" class="headerlink" title="启动并修改密码"></a>启动并修改密码</h2><blockquote><p>网上很多都是用的以前的方式，虽然也对，但是不符合我个人的需求</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 启动</span><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server start<span class="token comment" spellcheck="true"># 重启</span><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server restart<span class="token comment" spellcheck="true"># 停止</span><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server stop<span class="token comment" spellcheck="true"># 检查 MySQL 运行状态</span><span class="token function">sudo</span> /usr/local/mysql/support-files/mysql.server status<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这个在咱们文章还是不要使用了，我们使用下面的命令：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> /usr/local/mysql/bin/mysqld --user<span class="token operator">=</span>mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里就可以新建使用客户端工具连接mysql了。</p><pre class="line-numbers language-bash"><code class="language-bash">/usr/local/mysql -u root -p <span class="token comment" spellcheck="true"># 回车之后就是之前initialize之后出现的密码了</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="允许所有人连接"><a href="#允许所有人连接" class="headerlink" title="允许所有人连接"></a>允许所有人连接</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 使用mysql数据库</span>use mysql<span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 修改密码，这里不写了，使用客户端连接的时候会要求修改密码的，如果一定要手动修改，请查看参考资料。</span><span class="token comment" spellcheck="true"># 修改连接</span>update user <span class="token keyword">set</span> host<span class="token operator">=</span><span class="token string">"%"</span> where user<span class="token operator">=</span><span class="token string">"root"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># 刷新权限</span>flush privileges<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h2><blockquote><p>这个地方是利用<strong>launchctl</strong>来配置的</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vi</span> /Library/LaunchDaemons/com.mysql.mysql.plist<span class="token comment" spellcheck="true"># 然后在里面输入</span><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span>?<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE plist PUBLIC <span class="token string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="token string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span><span class="token operator">></span>    <span class="token operator">&lt;</span>plist version<span class="token operator">=</span><span class="token string">"1.0"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>dict<span class="token operator">></span>        <span class="token operator">&lt;</span>key<span class="token operator">></span>KeepAlive<span class="token operator">&lt;</span>/key<span class="token operator">></span>        <span class="token operator">&lt;</span>true/<span class="token operator">></span>        <span class="token operator">&lt;</span>key<span class="token operator">></span>Label<span class="token operator">&lt;</span>/key<span class="token operator">></span>        <span class="token operator">&lt;</span>string<span class="token operator">></span>com.mysql.mysqld<span class="token operator">&lt;</span>/string<span class="token operator">></span>        <span class="token operator">&lt;</span>key<span class="token operator">></span>ProgramArguments<span class="token operator">&lt;</span>/key<span class="token operator">></span>        <span class="token operator">&lt;</span>array<span class="token operator">></span>        <span class="token operator">&lt;</span>string<span class="token operator">></span>/usr/local/mysql/bin/mysqld_safe<span class="token operator">&lt;</span>/string<span class="token operator">></span>        <span class="token operator">&lt;</span>string<span class="token operator">></span>--user<span class="token operator">=</span>user<span class="token operator">&lt;</span>/string<span class="token operator">></span>        <span class="token operator">&lt;</span>/array<span class="token operator">></span>        <span class="token operator">&lt;</span>/dict<span class="token operator">></span>    <span class="token operator">&lt;</span>/plist<span class="token operator">></span><span class="token comment" spellcheck="true"># 然后wq保存就好了，就是这样的。</span><span class="token comment" spellcheck="true"># 现在要开机启动鸟，准备</span><span class="token function">sudo</span> launchctl load -w /Library/LaunchDaemons/com.mysql.mysql.plist<span class="token comment" spellcheck="true"># 到这里然后就没有然后了。</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.csdn.net/sunxiaoju/article/details/90899339" target="_blank" rel="noopener">mac 安装解压版的mysql8.0</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;软件环境&quot;&gt;&lt;a href=&quot;#软件环境&quot; class=&quot;headerlink&quot; title=&quot;软件环境&quot;&gt;&lt;/a&gt;软件环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;操作系统：macOS Catalina 正式版&lt;/li&gt;
&lt;li&gt;mysql版本：mysql-8.0.17-macos10.14-x86_64.tar.gz
    
    </summary>
    
    
    
      <category term="macOS" scheme="https://kany.me/tags/macOS/"/>
    
      <category term="Catalina" scheme="https://kany.me/tags/Catalina/"/>
    
      <category term="MySQL" scheme="https://kany.me/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>为Github Pages添加Gitment评价功能</title>
    <link href="https://kany.me/2019/10/08/add-gitment-comment-for-github-pagages/"/>
    <id>https://kany.me/2019/10/08/add-gitment-comment-for-github-pagages/</id>
    <published>2019-10-08T06:26:28.000Z</published>
    <updated>2019-10-08T07:02:48.142Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>自从修改了博客为<strong>Github Pages</strong>之后一直没有给博客系统添加上评价功能。最后我们选择了<strong>Gitment</strong><br>本文主要介绍一些注意的点，只描述自己遇到的，其余的请看参考资料</p></blockquote><a id="more"></a><h2 id="使用Gitment的条件"><a href="#使用Gitment的条件" class="headerlink" title="使用Gitment的条件"></a>使用Gitment的条件</h2><blockquote><p>由于大家都是已经使用了Github Pages也就有了Github的账号，那么需要创建如下程序：</p><ul><li><a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">Github Application</a>：这个用来授权用户登录之后认证</li><li><a href="https://github.com/new" target="_blank" rel="noopener">Github Repository</a>：这个用来保存评论信息</li></ul></blockquote><p><img src="/assets/images/gitment/0001.jpg" alt="img"></p><h2 id="Gitment-Id长度限制"><a href="#Gitment-Id长度限制" class="headerlink" title="Gitment Id长度限制"></a>Gitment Id长度限制</h2><blockquote><p>在刚接入的时候不知道个人的文章URL长度过长，造成点击“Initialize Comments”时一直提示“Validation Failed”</p></blockquote><p>返回错误信息如下：</p><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>  <span class="token string">"message"</span><span class="token punctuation">:</span> <span class="token string">"Validation Failed"</span><span class="token punctuation">,</span>  <span class="token string">"errors"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token punctuation">{</span>      <span class="token string">"value"</span><span class="token punctuation">:</span> <span class="token string">"https://www.kany.me/2019/09/18/clear-windows-icon-cache/"</span><span class="token punctuation">,</span>      <span class="token string">"resource"</span><span class="token punctuation">:</span> <span class="token string">"Label"</span><span class="token punctuation">,</span>      <span class="token string">"field"</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">,</span>      <span class="token string">"code"</span><span class="token punctuation">:</span> <span class="token string">"invalid"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token string">"documentation_url"</span><span class="token punctuation">:</span> <span class="token string">"https://developer.github.com/v3/issues/#create-an-issue"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>原因是在创建Label的Name时是有长度限制的，那么根据参考资料“<a href="https://madordie.github.io/post/blog-gitment-auto-setup/" target="_blank" rel="noopener">Gitment/Gitalk自动初始化</a>”采用了MD5处理URL的方式解决该问题</p><pre class="line-numbers language-javascript"><code class="language-javascript"><span class="token keyword">var</span> gitment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gitment</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    id<span class="token punctuation">:</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token string">"&lt;%= url %>"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    owner<span class="token punctuation">:</span> <span class="token string">'&lt;%= theme.gitment_owner %>'</span><span class="token punctuation">,</span>    repo<span class="token punctuation">:</span> <span class="token string">'&lt;%= theme.gitment_repo %>'</span><span class="token punctuation">,</span>    oauth<span class="token punctuation">:</span> <span class="token punctuation">{</span>        client_id<span class="token punctuation">:</span> <span class="token string">'&lt;%= theme.gitment_oauth.client_id %>'</span><span class="token punctuation">,</span>        client_secret<span class="token punctuation">:</span> <span class="token string">'&lt;%= theme.gitment_oauth.client_secret %>'</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="自定义域名"><a href="#自定义域名" class="headerlink" title="自定义域名"></a>自定义域名</h2><blockquote><p>Github Page使用自定义域名需要使用到解析Ip，常用的Github Pages的Ip如下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 美国</span>192.30.252.154192.30.252.153<span class="token comment" spellcheck="true"># 荷兰</span>185.199.110.153185.199.111.153185.199.108.153185.199.109.153<span class="token comment" spellcheck="true"># 美国</span>104.24.108.62104.24.109.62104.24.110.62104.24.111.62<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.jianshu.com/p/57afa4844aaa" target="_blank" rel="noopener">Gitment评论功能接入踩坑教程</a></li><li><a href="https://madordie.github.io/post/blog-gitment-auto-setup/" target="_blank" rel="noopener">Gitment/Gitalk自动初始化</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;自从修改了博客为&lt;strong&gt;Github Pages&lt;/strong&gt;之后一直没有给博客系统添加上评价功能。最后我们选择了&lt;strong&gt;Gitment&lt;/strong&gt;&lt;br&gt;本文主要介绍一些注意的点，只描述自己遇到的，其余的请看参考资料&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="Comment" scheme="https://kany.me/tags/Comment/"/>
    
      <category term="Github" scheme="https://kany.me/tags/Github/"/>
    
      <category term="Github-Pages" scheme="https://kany.me/tags/Github-Pages/"/>
    
      <category term="Gitment" scheme="https://kany.me/tags/Gitment/"/>
    
  </entry>
  
  <entry>
    <title>Date在JDK8的新变化</title>
    <link href="https://kany.me/2019/09/20/new-changes-of-date-in-jdk8/"/>
    <id>https://kany.me/2019/09/20/new-changes-of-date-in-jdk8/</id>
    <published>2019-09-20T03:02:06.000Z</published>
    <updated>2019-09-20T08:58:25.424Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>为了方便自己的记忆和查阅，写了一篇这样的抄袭的文章，原文位于参考资料中。</p><ul><li><strong>@Test:</strong>Junit的类测试标识</li><li><strong>@Slf4j:</strong>可以在类中直接使用log对象，调用debug等方法</li></ul></blockquote><h2 id="文章简介"><a href="#文章简介" class="headerlink" title="文章简介"></a>文章简介</h2><p>Java 的日期与时间API问题由来已久，Java8之前的版本中关于时间、日期及其他时间日期格式化类由于线程安全、重量级、序列化成本高等问题而饱受批评。<br>Java 8 吸收了Joda-Time的精华，以一个新的开始为Java创建优秀的API。<a id="more"></a><br>新的java.time中包含了所有关于时钟(Clock)，本地日期(LocalDate)、本地时间(LocalTime)、本地日期时间(LocalDateTime)、时区(ZonedDateTime)和持续时间(Duration)的类。<br>历史悠久的 Date类新增了toInstant()方法，用于把Date转换成新的表示形式。<br>这些新增的本地化时间日期API大大简化了了日期时间和本地化的管理。<br>目前Java8新增了java.time包定义的类表示日期-时间概念的规则，很方便使用；最重要的一点是值不可变，且线程安全。</p><blockquote><p>其中关键类如下：</p><ul><li><strong>Instant</strong>：代表的是时间戳</li><li><strong>LocalDate</strong>：不包含具体时间的日期</li><li><strong>LocalTime</strong>：不含日期的时间</li><li><strong>LocalDateTime</strong>：包含了日期及时间</li><li><strong>ZonedDateTime</strong>：包含日期时间和时区，本文中不介绍</li></ul></blockquote><blockquote><p>时间比较：</p><ul><li><strong>java.time.Period：</strong>主要是 Period 类方法 getYears()，getMonths() 和 getDays() 来计算。只能精确到年月日。</li><li><strong>java.time.Duration：</strong>提供了使用基于时间的值测量时间量的方法，用于LocalDateTime之间的比较。也可用于 Instant 之间的比较。</li><li><strong>java.time.temporal.ChronoUnit：</strong>ChronoUnit类可用于在单个时间单位内测量一段时间，这个工具类是最全的了，可以用于比较所有的时间单位。</li></ul></blockquote><h2 id="获取日期时间的信息"><a href="#获取日期时间的信息" class="headerlink" title="获取日期时间的信息"></a>获取日期时间的信息</h2><h3 id="LocalDate"><a href="#LocalDate" class="headerlink" title="LocalDate"></a>LocalDate</h3><p>LocalDate不包含具体时间的日期。</p><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//初始化</span>LocalDate nowDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前年份</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期年份：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当月年份</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期月份：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前天数</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前天数在日期中属于第几天：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期是今年的第几天</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期是今年的第几天：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getDayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期在当前属于星期几</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是星期几：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期在当前属于星期几，数值</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是星期几：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前月份在全年属于几月</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是几月：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前月份在全年属于几月，数值</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是几月：{}"</span><span class="token punctuation">,</span> nowDate<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期年份：<span class="token number">2019</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期月份：<span class="token number">9</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前天数在日期中属于第几天：<span class="token number">20</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期是今年的第几天：<span class="token number">263</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是星期几：FRIDAY【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是星期几：<span class="token number">5</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是几月：SEPTEMBER【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">11</span><span class="token operator">:</span><span class="token number">59</span><span class="token operator">:</span><span class="token number">53</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是几月：<span class="token number">9</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>在上面的运行结果发现这个星期和月份，好像不是从0开始的，难道是因为我的时区的原因？</p></blockquote><h3 id="LocalTime"><a href="#LocalTime" class="headerlink" title="LocalTime"></a>LocalTime</h3><p>LocalTime类获取时间信息</p><pre class="line-numbers language-java"><code class="language-java">LocalTime nowTime <span class="token operator">=</span> LocalTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前时间，格式：HH:mm:ss.SSS</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的时间：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前小时</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少时：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前分钟</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少分：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少秒：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前毫秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少毫秒：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前微秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少微秒：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//在java.time.temporal.ChronoField里面有很多类型</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少微秒：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getLong</span><span class="token punctuation">(</span>ChronoField<span class="token punctuation">.</span>MICRO_OF_DAY<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前纳秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少纳秒：{}"</span><span class="token punctuation">,</span> nowTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的时间：<span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38.688</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少时：<span class="token number">12</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少分：<span class="token number">7</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少秒：<span class="token number">38</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少毫秒：<span class="token number">688</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少毫秒：<span class="token number">688000</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少毫秒：<span class="token number">688000</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">12</span><span class="token operator">:</span><span class="token number">07</span><span class="token operator">:</span><span class="token number">38</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少纳秒：<span class="token number">688000000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="LocalDateTime"><a href="#LocalDateTime" class="headerlink" title="LocalDateTime"></a>LocalDateTime</h3><p>LocalDateTime类获取日期时间信息</p><pre class="line-numbers language-java"><code class="language-java">LocalDateTime nowDateTime <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前年份</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期年份：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当月年份</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期月份：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前天数</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前天数在日期中属于第几天：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期是今年的第几天</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期年份：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期在当前属于星期几</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是星期几：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期在当前属于星期几，数值</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是星期几：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前月份在全年属于几月</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是几月：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前月份在全年属于几月，数值</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是几月：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取当前天数</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是 {} 月份的第 {} 天"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getMonthValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前日期是今年的第几天</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天是 {} 年的第 {} 天"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getDayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前小时</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少时：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前分钟</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少分：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少秒：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前毫秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少毫秒：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前微秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少微秒：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//当前纳秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前是多少纳秒：{}"</span><span class="token punctuation">,</span> nowDateTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T14<span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22.279</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期年份：<span class="token number">2019</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期月份：<span class="token number">9</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前天数在日期中属于第几天：<span class="token number">20</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期年份：<span class="token number">263</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是星期几：FRIDAY【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是星期几：<span class="token number">5</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是几月：SEPTEMBER【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是几月：<span class="token number">9</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是 <span class="token number">9</span> 月份的第 <span class="token number">20</span> 天【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天是 <span class="token number">2019</span> 年的第 <span class="token number">263</span> 天【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少时：<span class="token number">14</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少分：<span class="token number">9</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少秒：<span class="token number">22</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少毫秒：<span class="token number">279</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少微秒：<span class="token number">279000</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">09</span><span class="token operator">:</span><span class="token number">22</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前是多少纳秒：<span class="token number">279000000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>从上面的运行结果发现<strong>LocalDateTime</strong>有<strong>LocalDate</strong>和<strong>LocalTime</strong>的所有常用功能。<br>但如果我们是根据日期或者时间单独比较，感觉单独使用<strong>LocalDate</strong>和<strong>LocalTime</strong>会好很多。</p></blockquote><h2 id="设定日期时间信息"><a href="#设定日期时间信息" class="headerlink" title="设定日期时间信息"></a>设定日期时间信息</h2><h3 id="LocalDate-1"><a href="#LocalDate-1" class="headerlink" title="LocalDate"></a>LocalDate</h3><p>常用的设定日期的方法</p><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//采用数值模式创建指定日期</span>LocalDate localDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> localDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//采用枚举设置月份</span>localDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> Month<span class="token punctuation">.</span>OCTOBER<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> localDate<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//调用ofYearDay方法指定年</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> LocalDate<span class="token punctuation">.</span><span class="token function">ofYearDay</span><span class="token punctuation">(</span><span class="token number">2018</span><span class="token punctuation">,</span> localDate<span class="token punctuation">.</span><span class="token function">getDayOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//调用ofEpochDay指定日期</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> LocalDate<span class="token punctuation">.</span><span class="token function">ofEpochDay</span><span class="token punctuation">(</span>localDate<span class="token punctuation">.</span><span class="token function">toEpochDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/** * 这个是指定时区的，可以看java.time.ZoneId中的静态方法static，CTT - Asia/Shanghai */</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>ZoneId<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Shanghai"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//根据格式转换</span>DateTimeFormatter dateTimeFormatter <span class="token operator">=</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyyMMdd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> LocalDate<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localDate<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2018</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">56</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天的日期：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">01</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="LocalTime-1"><a href="#LocalTime-1" class="headerlink" title="LocalTime"></a>LocalTime</h3><p>常用的设定时间的方法</p><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//指定UTC时区</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">systemUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//指定上海时区</span>LocalTime localTime <span class="token operator">=</span> LocalTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>ZoneId<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Shanghai"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> localTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用时、分创建，丢失秒及纳秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用时、分、秒创建，丢失纳秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用时、分、秒、纳秒创建。有没有皮秒不知道，但应该会丢失</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用秒创建，这个会丢失纳秒</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">ofSecondOfDay</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">toSecondOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用纳秒创建</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">ofNanoOfDay</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">toNanoOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//根据格式转换</span>DateTimeFormatter dateTimeFormatter <span class="token operator">=</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"HHmmss.SSS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天的日期：{}"</span><span class="token punctuation">,</span> localTime<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">07</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07.103</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07.148</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07.148</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07.148</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">15</span><span class="token operator">:</span><span class="token number">03</span><span class="token operator">:</span><span class="token number">07.148</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="LocalDateTime-1"><a href="#LocalDateTime-1" class="headerlink" title="LocalDateTime"></a>LocalDateTime</h3><p>常用的设定日期时间的方法</p><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//指定UTC时区</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">systemUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//指定上海时区</span>LocalDateTime localDateTime <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>ZoneId<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Shanghai"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//采用LocalDate、LocalTime作为参数</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> LocalTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//这个里就不多写什么的了直接用</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">getDayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">getHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">getMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//一般来说不建议使用这个方法</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">ofEpochSecond</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">.</span><span class="token function">toEpochSecond</span><span class="token punctuation">(</span>ZoneOffset<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">getNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ZoneOffset<span class="token punctuation">.</span>UTC<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//根据格式转换</span>DateTimeFormatter dateTimeFormatter <span class="token operator">=</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmmss.SSS"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">,</span> dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//对于格式的使用</span>dateTimeFormatter <span class="token operator">=</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofLocalizedDate</span><span class="token punctuation">(</span>FormatStyle<span class="token punctuation">.</span>FULL<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withLocale</span><span class="token punctuation">(</span>Locale<span class="token punctuation">.</span>CHINESE<span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前时间是：{}"</span><span class="token punctuation">,</span> localDateTime<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T07<span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30.780</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T15<span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30.822</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T15<span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30.823</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T15<span class="token operator">:</span><span class="token number">31</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T15<span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30.822</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span>20T15<span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30.822</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">15</span><span class="token operator">:</span><span class="token number">31</span><span class="token operator">:</span><span class="token number">30</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前时间是：<span class="token number">2019</span>年<span class="token number">9</span>月<span class="token number">20</span>日 星期五<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="日期时间的比较"><a href="#日期时间的比较" class="headerlink" title="日期时间的比较"></a>日期时间的比较</h2><blockquote><p>在JDK8中，LocalDate类中使用isBefore()、isAfter()、equals()方法来比较两个日期，可直接进行比较。<br>以LocalDate为例：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">LocalDate utcDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">systemUTC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LocalDate asiaDate <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span>Clock<span class="token punctuation">.</span><span class="token function">system</span><span class="token punctuation">(</span>ZoneId<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Asia/Shanghai"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"提问：今天是{}吗？回答：{} "</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>utcDate<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"是"</span> <span class="token operator">:</span> <span class="token string">"否"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//将UTC的时间减去一天，后面不介绍对于日期的加减等基本操作。这个地方记得重新赋值</span>utcDate <span class="token operator">=</span> utcDate<span class="token punctuation">.</span><span class="token function">minusDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用isBefore</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天 {} 是在 {} 之前吗？回答：{} "</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">,</span> utcDate<span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">isBefore</span><span class="token punctuation">(</span>utcDate<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"是"</span> <span class="token operator">:</span> <span class="token string">"否"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//使用isAfter</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今天 {} 是在 {} 之后吗？回答：{} "</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">,</span> utcDate<span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">isAfter</span><span class="token punctuation">(</span>utcDate<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"是"</span> <span class="token operator">:</span> <span class="token string">"否"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//询问每一年的10月有多少天</span>YearMonth yearMonth <span class="token operator">=</span> YearMonth<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>asiaDate<span class="token punctuation">.</span><span class="token function">getYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//DateTimeFormatter线程安全的日期与时间格式器</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"{} 有 {} 天"</span><span class="token punctuation">,</span> yearMonth<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> yearMonth<span class="token punctuation">.</span><span class="token function">lengthOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//询问是润年还是平年</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"今年是什么年？ {}"</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"闰年"</span> <span class="token operator">:</span> <span class="token string">"平年"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//采用ChronoUnit的枚举类进行加减</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"现在日期为：{}"</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"现在日期为：{}"</span><span class="token punctuation">,</span> asiaDate<span class="token punctuation">.</span><span class="token function">minus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 提问：今天是<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span>吗？回答：是 【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天 <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> 是在 <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">19</span> 之前吗？回答：否 【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今天 <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> 是在 <span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">19</span> 之后吗？回答：是 【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> <span class="token number">2019</span>年<span class="token number">10</span>月 有 <span class="token number">31</span> 天【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 今年是什么年？ 平年【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 现在日期为：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">21</span>【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">17</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 现在日期为：<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">19</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="计算日期时间差"><a href="#计算日期时间差" class="headerlink" title="计算日期时间差"></a>计算日期时间差</h2><blockquote><p>在Java8中，我们可以使用以下类来计算日期时间差异：</p><ul><li><strong>java.time.Period：</strong>主要是 Period 类方法 getYears()，getMonths() 和 getDays() 来计算。只能精确到年月日。</li><li><strong>java.time.Duration：</strong>提供了使用基于时间的值测量时间量的方法，用于LocalDateTime之间的比较。也可用于 Instant 之间的比较。</li><li><strong>java.time.temporal.ChronoUnit：</strong>ChronoUnit类可用于在单个时间单位内测量一段时间，这个工具类是最全的了，可以用于比较所有的时间单位。</li></ul></blockquote><h3 id="java-time-Period"><a href="#java-time-Period" class="headerlink" title="java.time.Period"></a>java.time.Period</h3><pre class="line-numbers language-java"><code class="language-java">LocalDate today <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期为：{}"</span><span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">;</span>LocalDate weddingDay <span class="token operator">=</span> LocalDate<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"纪念日时间为：{}"</span><span class="token punctuation">,</span> weddingDay<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//第二个参数减第一个参数，开始时间，结束时间</span>Period period <span class="token operator">=</span> Period<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已婚时间：{} 年 {} 月 {} 日"</span><span class="token punctuation">,</span> period<span class="token punctuation">.</span><span class="token function">getYears</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> period<span class="token punctuation">.</span><span class="token function">getMonths</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> period<span class="token punctuation">.</span><span class="token function">getDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="java-time-Duration"><a href="#java-time-Duration" class="headerlink" title="java.time.Duration"></a>java.time.Duration</h3><pre class="line-numbers language-java"><code class="language-java">LocalDateTime today <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期为：{}"</span><span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">;</span>LocalDateTime weddingDay <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"纪念日时间为：{}"</span><span class="token punctuation">,</span> weddingDay<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//第二个参数减第一个参数，开始时间，结束时间</span>Duration duration <span class="token operator">=</span> Duration<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 天 "</span><span class="token punctuation">,</span> duration<span class="token punctuation">.</span><span class="token function">toDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 时"</span><span class="token punctuation">,</span> duration<span class="token punctuation">.</span><span class="token function">toHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 分"</span><span class="token punctuation">,</span> duration<span class="token punctuation">.</span><span class="token function">toMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 秒"</span><span class="token punctuation">,</span> duration<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="java-time-temporal-ChronoUnit"><a href="#java-time-temporal-ChronoUnit" class="headerlink" title="java.time.temporal.ChronoUnit"></a>java.time.temporal.ChronoUnit</h3><pre class="line-numbers language-java"><code class="language-java">LocalDateTime today <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>DateTimeFormatter dateTimeFormatter <span class="token operator">=</span> DateTimeFormatter<span class="token punctuation">.</span><span class="token function">ofPattern</span><span class="token punctuation">(</span><span class="token string">"yyyy年MM月dd日 HH时mm分ss秒"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"当前日期为：{}"</span><span class="token punctuation">,</span> today<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>LocalDateTime weddingDay <span class="token operator">=</span> LocalDateTime<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"纪念日时间为：{}"</span><span class="token punctuation">,</span> weddingDay<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>dateTimeFormatter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 年"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>YEARS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 月"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MONTHS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 周"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>WEEKS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 天"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DAYS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 时"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>HOURS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 分"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MINUTES<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 秒"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 毫秒"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MILLIS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 微秒"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MICROS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 纳秒"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>NANOS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 半天"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>HALF_DAYS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 十年"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>DECADES<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 世纪（百年）"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>CENTURIES<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 千年"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>MILLENNIA<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">"已经经历：{} 纪元"</span><span class="token punctuation">,</span> ChronoUnit<span class="token punctuation">.</span>ERAS<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>weddingDay<span class="token punctuation">,</span> today<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>运行结果如下：</p></blockquote><pre class="line-numbers language-java"><code class="language-java">【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 当前日期为：<span class="token number">2019</span>年<span class="token number">09</span>月<span class="token number">20</span>日 <span class="token number">16</span>时<span class="token number">41</span>分<span class="token number">17</span>秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 纪念日时间为：<span class="token number">2019</span>年<span class="token number">02</span>月<span class="token number">11</span>日 <span class="token number">10</span>时<span class="token number">10</span>分<span class="token number">00</span>秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">0</span> 年【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">7</span> 月【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">31</span> 周【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">221</span> 天【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">5310</span> 时【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">318631</span> 分【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">19117877</span> 秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">19117877048</span> 毫秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">19117877048000</span> 微秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">19117877048000000</span> 纳秒【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">442</span> 半天【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">0</span> 十年【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">0</span> 世纪（百年）【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">0</span> 千年【<span class="token number">2019</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">16</span><span class="token operator">:</span><span class="token number">41</span><span class="token operator">:</span><span class="token number">17</span>】<span class="token operator">-</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span> DEBUG me<span class="token punctuation">.</span>kany<span class="token punctuation">.</span>project<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>date<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>DateUtilsTest <span class="token operator">-</span> 已经经历：<span class="token number">0</span> 纪元<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.cnblogs.com/wbxk/p/9598518.html" target="_blank" rel="noopener">JDK8 新增的日期时间API</a></li><li><a href="https://blog.csdn.net/sun_promise/article/details/51383618" target="_blank" rel="noopener">Java 8 新特性：Java 类库的新特性之日期时间API (Date/Time API )</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;为了方便自己的记忆和查阅，写了一篇这样的抄袭的文章，原文位于参考资料中。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;@Test:&lt;/strong&gt;Junit的类测试标识&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;@Slf4j:&lt;/strong&gt;可以在类中直接使用log对象，调用debug等方法&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;文章简介&quot;&gt;&lt;a href=&quot;#文章简介&quot; class=&quot;headerlink&quot; title=&quot;文章简介&quot;&gt;&lt;/a&gt;文章简介&lt;/h2&gt;&lt;p&gt;Java 的日期与时间API问题由来已久，Java8之前的版本中关于时间、日期及其他时间日期格式化类由于线程安全、重量级、序列化成本高等问题而饱受批评。&lt;br&gt;Java 8 吸收了Joda-Time的精华，以一个新的开始为Java创建优秀的API。
    
    </summary>
    
    
    
      <category term="JDK8" scheme="https://kany.me/tags/JDK8/"/>
    
      <category term="Date" scheme="https://kany.me/tags/Date/"/>
    
      <category term="Lombok" scheme="https://kany.me/tags/Lombok/"/>
    
      <category term="Junit" scheme="https://kany.me/tags/Junit/"/>
    
      <category term="Testng" scheme="https://kany.me/tags/Testng/"/>
    
  </entry>
  
  <entry>
    <title>常用屏蔽HOSTS文件</title>
    <link href="https://kany.me/2019/09/19/block-hosts-list/"/>
    <id>https://kany.me/2019/09/19/block-hosts-list/</id>
    <published>2019-09-19T15:25:02.000Z</published>
    <updated>2019-10-08T02:55:40.219Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>文章中的思杰马克丁才是重点，其余的请忽视。如果有人使用只要复制思杰马克丁的那一段就好。切切！<br>对于屏蔽之后的后果，我只想说屏蔽之后我很开心。</p></blockquote><a id="more"></a><h2 id="屏蔽内容"><a href="#屏蔽内容" class="headerlink" title="屏蔽内容"></a>屏蔽内容</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># SublimeText激活屏蔽</span>127.0.0.1   www.sublimetext.com127.0.0.1   license.sublimehq.com<span class="token comment" spellcheck="true"># Remote Desktop Manager Enterprise 激活屏蔽</span>127.0.0.1 crm.devolutions.net<span class="token comment" spellcheck="true"># 迅雷敏感资源屏蔽</span>127.0.0.1 hub5btmain.sandai.net127.0.0.1 hub5emu.sandai.net127.0.0.1 upgrade.xl9.xunlei.com<span class="token comment" spellcheck="true">## XSHell</span>127.0.0.1   transact.netsarang.com127.0.0.1   update.netsarang.com127.0.0.1   www.netsarang.com127.0.0.1   www.netsarang.co.kr127.0.0.1   sales.netsarang.com<span class="token comment" spellcheck="true">## MindJet</span>127.0.0.1   www.mindjet.com127.0.0.1   mindjet.com127.0.0.1   ipm.corel.com<span class="token comment" spellcheck="true">#思杰马克丁</span>127.0.0.1   xmindchina.net127.0.0.1   www.xmindchina.net127.0.0.1   www.ntfsformac.cc127.0.0.1   www.makeding.com127.0.0.1   makeding.com127.0.0.1   vm.makeding.com127.0.0.1   www.bingdianhuanyuan.cn127.0.0.1   xia.bingdianhuanyuan.cn127.0.0.1   bingdianhuanyuan.cn127.0.0.1   huishenghuiying.com.cn127.0.0.1   www.huishenghuiying.com.cn127.0.0.1   xia.huishenghuiying.com.cn127.0.0.1   coreldrawchina.com127.0.0.1   xia.coreldrawchina.com127.0.0.1   www.coreldrawchina.com127.0.0.1   shankejingling.com127.0.0.1   www.shankejingling.com127.0.0.1   xia.shankejingling.com127.0.0.1   mairuan.com127.0.0.1   www.mairuan.com127.0.0.1   xia.mairuan.com127.0.0.1   logoshejishi.com127.0.0.1   www.logoshejishi.com127.0.0.1   xia.logoshejishi.com127.0.0.1   keyshot.cc127.0.0.1   xia.keyshot.cc127.0.0.1   www.keyshot.cc127.0.0.1   flstudiochina.com127.0.0.1   www.flstudiochina.com127.0.0.1   xia.flstudiochina.com127.0.0.1   ediuschina.com127.0.0.1   www.ediuschina.com127.0.0.1   xia.ediuschina.com127.0.0.1   vegaschina.cn127.0.0.1   www.vegaschina.cn127.0.0.1   xia.vegaschina.cn127.0.0.1   guitarpro.cc127.0.0.1   www.guitarpro.cc127.0.0.1   xia.guitarpro.cc127.0.0.1   www.xmindchina.cn127.0.0.1   xia.xmindchina.cn127.0.0.1   xmindchina.cn127.0.0.1   xmindchina.net127.0.0.1   www.xmindchina.net127.0.0.1   xia.xmindchina.net127.0.0.1   mindmanager.cc127.0.0.1   www.mindmanager.cc127.0.0.1   xia.mindmanager.cc127.0.0.1   kingdeecn.cn127.0.0.1   www.kingdeecn.cn127.0.0.1   xia.kingdeecn.cn127.0.0.1   xshellcn.com127.0.0.1   www.xshellcn.com127.0.0.1   xia.xshellcn.com127.0.0.1   imindmap.cc127.0.0.1   www.imindmap.cc127.0.0.1   xia.imindmap.cc127.0.0.1   abbyychina.com127.0.0.1   www.abbyychina.com127.0.0.1   xia.abbyychina.com127.0.0.1   bartender.cc127.0.0.1   www.bartender.cc127.0.0.1   xia.bartender.cc127.0.0.1   jihehuaban.com.cn127.0.0.1   www.jihehuaban.com.cn127.0.0.1   xia.jihehuaban.com.cn127.0.0.1   mathtype.cn127.0.0.1   www.mathtype.cn127.0.0.1   xia.mathtype.cn127.0.0.1   chemdraw.com.cn127.0.0.1   www.chemdraw.com.cn127.0.0.1   xia.chemdraw.com.cn127.0.0.1   mycleanmymac.com127.0.0.1   www.mycleanmymac.com127.0.0.1   xia.mycleanmymac.com127.0.0.1   ntfsformac.cn127.0.0.1   www.ntfsformac.cn127.0.0.1   xia.ntfsformac.cn127.0.0.1   parallelsdesktop.cn127.0.0.1   www.parallelsdesktop.cn127.0.0.1   xia.parallelsdesktop.cn127.0.0.1   beyondcompare.cc127.0.0.1   www.beyondcompare.cc127.0.0.1   xia.beyondcompare.cc127.0.0.1   easyrecoverychina.com127.0.0.1   www.easyrecoverychina.com127.0.0.1   xia.easyrecoverychina.com127.0.0.1   bingdianhuanyuan.cn127.0.0.1   www.bingdianhuanyuan.cn127.0.0.1   xia.bingdianhuanyuan.cn127.0.0.1   hypersnap.mairuan.com127.0.0.1   www.iconworkshop.cn127.0.0.1   iconworkshop.cn127.0.0.1   www.pdfexpert.cc127.0.0.1   xiazai.pdfexpert.cc127.0.0.1   www.zhzzx.com127.0.0.1   yihuifu.cn127.0.0.1   www.4009997658.com127.0.0.1   4009997658.com127.0.0.1   mairuanwang.com127.0.0.1   www.mairuanwang.com127.0.0.1   mairuan.com127.0.0.1   mairuan.cn127.0.0.1   mairuan.net127.0.0.1   mairuan.com.cn<span class="token comment" spellcheck="true">#软件屏蔽</span>127.0.0.1   www.techsmith.com127.0.0.1   updater.techsmith.com127.0.0.1   camtasiatudi.techsmith.com127.0.0.1   tsccloud.cloudapp.net127.0.0.1   assets.cloud.techsmith.com127.0.0.1   activation.cloud.techsmith.com127.0.0.1   65.52.240.48127.0.0.1   69.167.144.18127.0.0.1   acdid.acdsystems.com127.0.0.1   l.qq.com127.0.0.1   ra.gtimg.com127.0.0.1   c.l.qq.com127.0.0.1   livep.l.qq.com127.0.0.1   lives.l.qq.com127.0.0.1   livec.l.qq.com<span class="token comment" spellcheck="true">#Adobe屏蔽</span>127.0.0.1   activate.wip3.adobe.com127.0.0.1   wip3.adobe.com127.0.0.1   3dns-3.adobe.com127.0.0.1   3dns-2.adobe.com127.0.0.1   adobe-dns.adobe.com127.0.0.1   adobe-dns-2.adobe.com127.0.0.1   adobe-dns-3.adobe.com127.0.0.1   ereg.wip3.adobe.com127.0.0.1   activate-sea.adobe.com127.0.0.1   wwis-dubc1-vip60.adobe.com127.0.0.1   activate-sjc0.adobe.com127.0.0.1   lm.licenses.adobe.com127.0.0.1   192.150.14.69127.0.0.1   192.150.18.101127.0.0.1   192.150.18.108127.0.0.1   192.150.22.40127.0.0.1   192.150.8.100127.0.0.1   192.150.8.118127.0.0.1   209-34-83-73.ood.opsource.net127.0.0.1   3dns-1.adobe.com127.0.0.1   3dns-4.adobe.com127.0.0.1   3dns.adobe.com127.0.0.1   activate-sea.adobe.com127.0.0.1   activate.wip.adobe.com127.0.0.1   activate.wip1.adobe.com127.0.0.1   activate.wip2.adobe.com127.0.0.1   activate.wip4.adobe.com127.0.0.1   adobe-dns-1.adobe.com127.0.0.1   adobe-dns-2.adobe.com127.0.0.1   adobe-dns-3.adobe.com127.0.0.1   adobe-dns-4.adobe.com127.0.0.1   adobe-dns.adobe.com127.0.0.1   adobe.activate.com127.0.0.1   adobeereg.com127.0.0.1   crl.verisign.net127.0.0.1   ereg.wip.adobe.com127.0.0.1   ereg.wip1.adobe.com127.0.0.1   ereg.wip2.adobe.com127.0.0.1   ereg.wip3.adobe.com127.0.0.1   ereg.wip4.adobe.com127.0.0.1   hl2rcv.adobe.com127.0.0.1   ood.opsource.net127.0.0.1   practivate.adobe.ipp127.0.0.1   practivate.adobe.newoa127.0.0.1   practivate.adobe.ntp127.0.0.1   tss-geotrust-crl.thawte.com127.0.0.1   wip.adobe.com127.0.0.1   wip1.adobe.com127.0.0.1   wip2.adobe.com127.0.0.1   wip3.adobe.com127.0.0.1   wip4.adobe.com127.0.0.1   wwis-dubc1-vip60.adobe.com127.0.0.1   get.daum.net127.0.0.1   live.tvpot.daum.net127.0.0.1   potplayertv.daum.net127.0.0.1   ars.smartscreen.microsoft.com127.0.0.1   az361816.vo.msecnd.net127.0.0.1   az512334.vo.msecnd.net127.0.0.1   blob.weather.microsoft.com127.0.0.1   candycrushsoda.king.com127.0.0.1   cdn.content.prod.cms.msn.com127.0.0.1   cdn.onenote.net127.0.0.1   choice.microsoft.com127.0.0.1   choice.microsoft.com.nsatc.net127.0.0.1   client.wns.windows.com127.0.0.1   client-s.gateway.messenger.live.com127.0.0.1   clientconfig.passport.net127.0.0.1   deploy.static.akamaitechnologies.com127.0.0.1   device.auth.xboxlive.com127.0.0.1   dmd.metaservices.microsoft.com127.0.0.1   dns.msftncsi.com127.0.0.1   feedback.microsoft-hohm.com127.0.0.1   feedback.search.microsoft.com127.0.0.1   feedback.windows.com127.0.0.1   img-s-msn-com.akamaized.net127.0.0.1   insiderppe.cloudapp.net127.0.0.1   licensing.mp.microsoft.com127.0.0.1   mediaredirect.microsoft.com127.0.0.1   msftncsi.com127.0.0.1   officeclient.microsoft.com127.0.0.1   oneclient.sfx.ms127.0.0.1   pti.store.microsoft.com127.0.0.1   query.prod.cms.rt.microsoft.com127.0.0.1   register.cdpcs.microsoft.com127.0.0.1   s0.2mdn.net127.0.0.1   sO.2mdn.net127.0.0.1   search.msn.com127.0.0.1   settings-ssl.xboxlive.com127.0.0.1   static.2mdn.net127.0.0.1   store-images.s-microsoft.com127.0.0.1   storeedgefd.dsx.mp.microsoft.com127.0.0.1   support.microsoft.com127.0.0.1   tile-service.weather.microsoft.com127.0.0.1   time.windows.com127.0.0.1   tk2.plt.msn.com127.0.0.1   urs.smartscreen.microsoft.com127.0.0.1   wdcp.microsoft.com127.0.0.1   wdcpalt.microsoft.com127.0.0.1   win10-trt.msedge.net127.0.0.1   wscont.apps.microsoft.com127.0.0.1   www.msftconnecttest.com127.0.0.1   www.msftncsi.com127.0.0.1   a-0001.a-msedge.net127.0.0.1   a-0001.dc-msedge.net127.0.0.1   a-0002.a-msedge.net127.0.0.1   a-0003.a-msedge.net127.0.0.1   a-0004.a-msedge.net127.0.0.1   a-0005.a-msedge.net127.0.0.1   a-0006.a-msedge.net127.0.0.1   a-0007.a-msedge.net127.0.0.1   a-0008.a-msedge.net127.0.0.1   a-0009.a-msedge.net127.0.0.1   a-0010.a-msedge.net127.0.0.1   a-0011.a-msedge.net127.0.0.1   a-0012.a-msedge.net127.0.0.1   a-msedge.net127.0.0.1   a.ads1.msn.com127.0.0.1   a.ads2.msads.net127.0.0.1   a.ads2.msn.com127.0.0.1   a.rad.msn.com127.0.0.1   ac3.msn.com127.0.0.1   activity.windows.com127.0.0.1   adnexus.net127.0.0.1   adnxs.com127.0.0.1   ads.msn.com127.0.0.1   ads1.msads.net127.0.0.1   ads1.msn.com127.0.0.1   aidps.atdmt.com127.0.0.1   aka-cdn-ns.adtech.de127.0.0.1   array101-prod.do.dsp.mp.microsoft.com127.0.0.1   array102-prod.do.dsp.mp.microsoft.com127.0.0.1   array103-prod.do.dsp.mp.microsoft.com127.0.0.1   array104-prod.do.dsp.mp.microsoft.com127.0.0.1   array201-prod.do.dsp.mp.microsoft.com127.0.0.1   array202-prod.do.dsp.mp.microsoft.com127.0.0.1   array203-prod.do.dsp.mp.microsoft.com127.0.0.1   array204-prod.do.dsp.mp.microsoft.com127.0.0.1   array401-prod.do.dsp.mp.microsoft.com127.0.0.1   array402-prod.do.dsp.mp.microsoft.com127.0.0.1   array403-prod.do.dsp.mp.microsoft.com127.0.0.1   array404-prod.do.dsp.mp.microsoft.com127.0.0.1   array405-prod.do.dsp.mp.microsoft.com127.0.0.1   array406-prod.do.dsp.mp.microsoft.com127.0.0.1   array407-prod.do.dsp.mp.microsoft.com127.0.0.1   array408-prod.do.dsp.mp.microsoft.com127.0.0.1   b.ads1.msn.com127.0.0.1   b.ads2.msads.net127.0.0.1   b.rad.msn.com127.0.0.1   bingads.microsoft.com127.0.0.1   bl3301-a.1drv.com127.0.0.1   bl3301-c.1drv.com127.0.0.1   bl3301-g.1drv.com127.0.0.1   bn1304-e.1drv.com127.0.0.1   bn1306-a.1drv.com127.0.0.1   bn1306-e.1drv.com127.0.0.1   bn1306-g.1drv.com127.0.0.1   bn2b-cor001.api.p001.1drv.com127.0.0.1   bn2b-cor002.api.p001.1drv.com127.0.0.1   bn3p-cor001.api.p001.1drv.com127.0.0.1   bn2b-cor003.api.p001.1drv.com127.0.0.1   bn2b-cor004.api.p001.1drv.com127.0.0.1   bn2wns1.wns.windows.com127.0.0.1   bn3sch020022328.wns.windows.com127.0.0.1   by3301-a.1drv.com127.0.0.1   by3301-c.1drv.com127.0.0.1   by3301-e.1drv.com127.0.0.1   bs.serving-sys.com127.0.0.1   c.atdmt.com127.0.0.1   c.msn.com127.0.0.1   c-0001.dc-msedge.net127.0.0.1   ca.telemetry.microsoft.com127.0.0.1   cache.datamart.windows.com127.0.0.1   cdn.atdmt.com127.0.0.1   cds1204.lon.llnw.net127.0.0.1   cds1293.lon.llnw.net127.0.0.1   cds20417.lcy.llnw.net127.0.0.1   cds20431.lcy.llnw.net127.0.0.1   cds20450.lcy.llnw.net127.0.0.1   cds20457.lcy.llnw.net127.0.0.1   cds20475.lcy.llnw.net127.0.0.1   cds21244.lon.llnw.net127.0.0.1   cds26.ams9.msecn.net127.0.0.1   cds425.lcy.llnw.net127.0.0.1   cds459.lcy.llnw.net127.0.0.1   cds494.lcy.llnw.net127.0.0.1   cds965.lon.llnw.net127.0.0.1   ch1-cor001.api.p001.1drv.com127.0.0.1   ch1-cor002.api.p001.1drv.com127.0.0.1   ch3301-c.1drv.com127.0.0.1   ch3301-e.1drv.com127.0.0.1   ch3301-g.1drv.com127.0.0.1   ch3302-c.1drv.com127.0.0.1   ch3302-e.1drv.com127.0.0.1   compatexchange.cloudapp.net127.0.0.1   compatexchange1.trafficmanager.net127.0.0.1   continuum.dds.microsoft.com127.0.0.1   corp.sts.microsoft.com127.0.0.1   corpext.msitadfs.glbdns2.microsoft.com127.0.0.1   cp101-prod.do.dsp.mp.microsoft.com127.0.0.1   cp201-prod.do.dsp.mp.microsoft.com127.0.0.1   cp401-prod.do.dsp.mp.microsoft.com127.0.0.1   cs1.wpc.v0cdn.net127.0.0.1   db3aqu.atdmt.com127.0.0.1   db3wns2011111.wns.windows.com127.0.0.1   db5.wns.windows.com127.0.0.1   db5sch101100122.wns.windows.com127.0.0.1   db5sch101100127.wns.windows.com127.0.0.1   db5sch101100831.wns.windows.com127.0.0.1   db5sch101100835.wns.windows.com127.0.0.1   db5sch101100917.wns.windows.com127.0.0.1   db5sch101100925.wns.windows.com127.0.0.1   db5sch101100928.wns.windows.com127.0.0.1   db5sch101100938.wns.windows.com127.0.0.1   db5sch101101001.wns.windows.com127.0.0.1   db5sch101101022.wns.windows.com127.0.0.1   db5sch101101024.wns.windows.com127.0.0.1   db5sch101101031.wns.windows.com127.0.0.1   db5sch101101034.wns.windows.com127.0.0.1   db5sch101101042.wns.windows.com127.0.0.1   db5sch101101044.wns.windows.com127.0.0.1   db5sch101101122.wns.windows.com127.0.0.1   db5sch101101123.wns.windows.com127.0.0.1   db5sch101101125.wns.windows.com127.0.0.1   db5sch101101128.wns.windows.com127.0.0.1   db5sch101101129.wns.windows.com127.0.0.1   db5sch101101133.wns.windows.com127.0.0.1   db5sch101101145.wns.windows.com127.0.0.1   db5sch101101209.wns.windows.com127.0.0.1   db5sch101101221.wns.windows.com127.0.0.1   db5sch101101228.wns.windows.com127.0.0.1   db5sch101101231.wns.windows.com127.0.0.1   db5sch101101237.wns.windows.com127.0.0.1   db5sch101101317.wns.windows.com127.0.0.1   db5sch101101324.wns.windows.com127.0.0.1   db5sch101101329.wns.windows.com127.0.0.1   db5sch101101333.wns.windows.com127.0.0.1   db5sch101101334.wns.windows.com127.0.0.1   db5sch101101338.wns.windows.com127.0.0.1   db5sch101101419.wns.windows.com127.0.0.1   db5sch101101424.wns.windows.com127.0.0.1   db5sch101101426.wns.windows.com127.0.0.1   db5sch101101427.wns.windows.com127.0.0.1   db5sch101101430.wns.windows.com127.0.0.1   db5sch101101445.wns.windows.com127.0.0.1   db5sch101101511.wns.windows.com127.0.0.1   db5sch101101519.wns.windows.com127.0.0.1   db5sch101101529.wns.windows.com127.0.0.1   db5sch101101535.wns.windows.com127.0.0.1   db5sch101101541.wns.windows.com127.0.0.1   db5sch101101543.wns.windows.com127.0.0.1   db5sch101101608.wns.windows.com127.0.0.1   db5sch101101618.wns.windows.com127.0.0.1   db5sch101101629.wns.windows.com127.0.0.1   db5sch101101631.wns.windows.com127.0.0.1   db5sch101101633.wns.windows.com127.0.0.1   db5sch101101640.wns.windows.com127.0.0.1   db5sch101101711.wns.windows.com127.0.0.1   db5sch101101722.wns.windows.com127.0.0.1   db5sch101101739.wns.windows.com127.0.0.1   db5sch101101745.wns.windows.com127.0.0.1   db5sch101101813.wns.windows.com127.0.0.1   db5sch101101820.wns.windows.com127.0.0.1   db5sch101101826.wns.windows.com127.0.0.1   db5sch101101835.wns.windows.com127.0.0.1   db5sch101101837.wns.windows.com127.0.0.1   db5sch101101844.wns.windows.com127.0.0.1   db5sch101101907.wns.windows.com127.0.0.1   db5sch101101914.wns.windows.com127.0.0.1   db5sch101101929.wns.windows.com127.0.0.1   db5sch101101939.wns.windows.com127.0.0.1   db5sch101101941.wns.windows.com127.0.0.1   db5sch101102015.wns.windows.com127.0.0.1   db5sch101102017.wns.windows.com127.0.0.1   db5sch101102019.wns.windows.com127.0.0.1   db5sch101102023.wns.windows.com127.0.0.1   db5sch101102025.wns.windows.com127.0.0.1   db5sch101102032.wns.windows.com127.0.0.1   db5sch101102033.wns.windows.com127.0.0.1   db5sch101110108.wns.windows.com127.0.0.1   db5sch101110109.wns.windows.com127.0.0.1   db5sch101110114.wns.windows.com127.0.0.1   db5sch101110135.wns.windows.com127.0.0.1   db5sch101110142.wns.windows.com127.0.0.1   db5sch101110204.wns.windows.com127.0.0.1   db5sch101110206.wns.windows.com127.0.0.1   db5sch101110214.wns.windows.com127.0.0.1   db5sch101110225.wns.windows.com127.0.0.1   db5sch101110232.wns.windows.com127.0.0.1   db5sch101110245.wns.windows.com127.0.0.1   db5sch101110315.wns.windows.com127.0.0.1   db5sch101110323.wns.windows.com127.0.0.1   db5sch101110325.wns.windows.com127.0.0.1   db5sch101110328.wns.windows.com127.0.0.1   db5sch101110331.wns.windows.com127.0.0.1   db5sch101110341.wns.windows.com127.0.0.1   db5sch101110343.wns.windows.com127.0.0.1   db5sch101110345.wns.windows.com127.0.0.1   db5sch101110403.wns.windows.com127.0.0.1   db5sch101110419.wns.windows.com127.0.0.1   db5sch101110438.wns.windows.com127.0.0.1   db5sch101110442.wns.windows.com127.0.0.1   db5sch101110501.wns.windows.com127.0.0.1   db5sch101110527.wns.windows.com127.0.0.1   db5sch101110533.wns.windows.com127.0.0.1   db5sch101110618.wns.windows.com127.0.0.1   db5sch101110622.wns.windows.com127.0.0.1   db5sch101110624.wns.windows.com127.0.0.1   db5sch101110626.wns.windows.com127.0.0.1   db5sch101110634.wns.windows.com127.0.0.1   db5sch101110705.wns.windows.com127.0.0.1   db5sch101110724.wns.windows.com127.0.0.1   db5sch101110740.wns.windows.com127.0.0.1   db5sch101110810.wns.windows.com127.0.0.1   db5sch101110816.wns.windows.com127.0.0.1   db5sch101110821.wns.windows.com127.0.0.1   db5sch101110822.wns.windows.com127.0.0.1   db5sch101110825.wns.windows.com127.0.0.1   db5sch101110828.wns.windows.com127.0.0.1   db5sch101110835.wns.windows.com127.0.0.1   db5sch101110919.wns.windows.com127.0.0.1   db5sch101110921.wns.windows.com127.0.0.1   db5sch101110923.wns.windows.com127.0.0.1   db5sch101110929.wns.windows.com127.0.0.1   db5sch103081814.wns.windows.com127.0.0.1   db5sch103082011.wns.windows.com127.0.0.1   db5sch103082111.wns.windows.com127.0.0.1   db5sch103082308.wns.windows.com127.0.0.1   db5sch103082406.wns.windows.com127.0.0.1   db5sch103082409.wns.windows.com127.0.0.1   db5sch103082609.wns.windows.com127.0.0.1   db5sch103082611.wns.windows.com127.0.0.1   db5sch103082709.wns.windows.com127.0.0.1   db5sch103082712.wns.windows.com127.0.0.1   db5sch103082806.wns.windows.com127.0.0.1   db5sch103090115.wns.windows.com127.0.0.1   db5sch103090415.wns.windows.com127.0.0.1   db5sch103090513.wns.windows.com127.0.0.1   db5sch103090515.wns.windows.com127.0.0.1   db5sch103090608.wns.windows.com127.0.0.1   db5sch103090806.wns.windows.com127.0.0.1   db5sch103090814.wns.windows.com127.0.0.1   db5sch103090906.wns.windows.com127.0.0.1   db5sch103091011.wns.windows.com127.0.0.1   db5sch103091012.wns.windows.com127.0.0.1   db5sch103091106.wns.windows.com127.0.0.1   db5sch103091108.wns.windows.com127.0.0.1   db5sch103091212.wns.windows.com127.0.0.1   db5sch103091311.wns.windows.com127.0.0.1   db5sch103091414.wns.windows.com127.0.0.1   db5sch103091511.wns.windows.com127.0.0.1   db5sch103091617.wns.windows.com127.0.0.1   db5sch103091715.wns.windows.com127.0.0.1   db5sch103091817.wns.windows.com127.0.0.1   db5sch103091908.wns.windows.com127.0.0.1   db5sch103091911.wns.windows.com127.0.0.1   db5sch103092010.wns.windows.com127.0.0.1   db5sch103092108.wns.windows.com127.0.0.1   db5sch103092109.wns.windows.com127.0.0.1   db5sch103092209.wns.windows.com127.0.0.1   db5sch103092210.wns.windows.com127.0.0.1   db5sch103092509.wns.windows.com127.0.0.1   db5sch103100117.wns.windows.com127.0.0.1   db5sch103100121.wns.windows.com127.0.0.1   db5sch103100221.wns.windows.com127.0.0.1   db5sch103100313.wns.windows.com127.0.0.1   db5sch103100314.wns.windows.com127.0.0.1   db5sch103100510.wns.windows.com127.0.0.1   db5sch103100511.wns.windows.com127.0.0.1   db5sch103100611.wns.windows.com127.0.0.1   db5sch103100712.wns.windows.com127.0.0.1   db5sch103101105.wns.windows.com127.0.0.1   db5sch103101208.wns.windows.com127.0.0.1   db5sch103101212.wns.windows.com127.0.0.1   db5sch103101314.wns.windows.com127.0.0.1   db5sch103101411.wns.windows.com127.0.0.1   db5sch103101413.wns.windows.com127.0.0.1   db5sch103101513.wns.windows.com127.0.0.1   db5sch103101610.wns.windows.com127.0.0.1   db5sch103101611.wns.windows.com127.0.0.1   db5sch103101705.wns.windows.com127.0.0.1   db5sch103101711.wns.windows.com127.0.0.1   db5sch103101909.wns.windows.com127.0.0.1   db5sch103101914.wns.windows.com127.0.0.1   db5sch103102009.wns.windows.com127.0.0.1   db5sch103102112.wns.windows.com127.0.0.1   db5sch103102203.wns.windows.com127.0.0.1   db5sch103102209.wns.windows.com127.0.0.1   db5sch103102310.wns.windows.com127.0.0.1   db5sch103102404.wns.windows.com127.0.0.1   db5sch103102609.wns.windows.com127.0.0.1   db5sch103102610.wns.windows.com127.0.0.1   db5sch103102805.wns.windows.com127.0.0.1   db5wns1d.wns.windows.com127.0.0.1   db6sch102090104.wns.windows.com127.0.0.1   db6sch102090112.wns.windows.com127.0.0.1   db6sch102090116.wns.windows.com127.0.0.1   db6sch102090122.wns.windows.com127.0.0.1   db6sch102090203.wns.windows.com127.0.0.1   db6sch102090206.wns.windows.com127.0.0.1   db6sch102090208.wns.windows.com127.0.0.1   db6sch102090209.wns.windows.com127.0.0.1   db6sch102090211.wns.windows.com127.0.0.1   db6sch102090305.wns.windows.com127.0.0.1   db6sch102090306.wns.windows.com127.0.0.1   db6sch102090308.wns.windows.com127.0.0.1   db6sch102090311.wns.windows.com127.0.0.1   db6sch102090313.wns.windows.com127.0.0.1   db6sch102090410.wns.windows.com127.0.0.1   db6sch102090412.wns.windows.com127.0.0.1   db6sch102090504.wns.windows.com127.0.0.1   db6sch102090510.wns.windows.com127.0.0.1   db6sch102090512.wns.windows.com127.0.0.1   db6sch102090513.wns.windows.com127.0.0.1   db6sch102090514.wns.windows.com127.0.0.1   db6sch102090519.wns.windows.com127.0.0.1   db6sch102090613.wns.windows.com127.0.0.1   db6sch102090619.wns.windows.com127.0.0.1   db6sch102090810.wns.windows.com127.0.0.1   db6sch102090811.wns.windows.com127.0.0.1   db6sch102090902.wns.windows.com127.0.0.1   db6sch102090905.wns.windows.com127.0.0.1   db6sch102090907.wns.windows.com127.0.0.1   db6sch102090908.wns.windows.com127.0.0.1   db6sch102090910.wns.windows.com127.0.0.1   db6sch102090911.wns.windows.com127.0.0.1   db6sch102091003.wns.windows.com127.0.0.1   db6sch102091007.wns.windows.com127.0.0.1   db6sch102091008.wns.windows.com127.0.0.1   db6sch102091009.wns.windows.com127.0.0.1   db6sch102091011.wns.windows.com127.0.0.1   db6sch102091103.wns.windows.com127.0.0.1   db6sch102091105.wns.windows.com127.0.0.1   db6sch102091204.wns.windows.com127.0.0.1   db6sch102091209.wns.windows.com127.0.0.1   db6sch102091305.wns.windows.com127.0.0.1   db6sch102091307.wns.windows.com127.0.0.1   db6sch102091308.wns.windows.com127.0.0.1   db6sch102091309.wns.windows.com127.0.0.1   db6sch102091314.wns.windows.com127.0.0.1   db6sch102091412.wns.windows.com127.0.0.1   db6sch102091503.wns.windows.com127.0.0.1   db6sch102091507.wns.windows.com127.0.0.1   db6sch102091602.wns.windows.com127.0.0.1   db6sch102091603.wns.windows.com127.0.0.1   db6sch102091606.wns.windows.com127.0.0.1   db6sch102091607.wns.windows.com127.0.0.1   dev.virtualearth.net127.0.0.1   df.telemetry.microsoft.com127.0.0.1   disc101-prod.do.dsp.mp.microsoft.com127.0.0.1   disc201-prod.do.dsp.mp.microsoft.com127.0.0.1   disc401-prod.do.dsp.mp.microsoft.com127.0.0.1   diagnostics.support.microsoft.com127.0.0.1   ec.atdmt.com127.0.0.1   ecn.dev.virtualearth.net127.0.0.1   eu.vortex.data.microsoft.com127.0.0.1   flex.msn.com127.0.0.1   fs.microsoft.com127.0.0.1   g.msn.com127.0.0.1   geo-prod.do.dsp.mp.microsoft.com127.0.0.1   geover-prod.do.dsp.mp.microsoft.com127.0.0.1   h1.msn.com127.0.0.1   h2.msn.com127.0.0.1   i-bl6p-cor001.api.p001.1drv.com127.0.0.1   i-by3p-cor001.api.p001.1drv.com127.0.0.1   i-by3p-cor002.api.p001.1drv.com127.0.0.1   i-ch1-cor001.api.p001.1drv.com127.0.0.1   i-ch1-cor002.api.p001.1drv.com127.0.0.1   i-sn2-cor001.api.p001.1drv.com127.0.0.1   i-sn2-cor002.api.p001.1drv.com127.0.0.1   i1.services.social.microsoft.com127.0.0.1   i1.services.social.microsoft.com.nsatc.net127.0.0.1   inference.location.live.net127.0.0.1   kv101-prod.do.dsp.mp.microsoft.com127.0.0.1   kv201-prod.do.dsp.mp.microsoft.com127.0.0.1   kv401-prod.do.dsp.mp.microsoft.com127.0.0.1   lb1.www.ms.akadns.net127.0.0.1   live.rads.msn.com127.0.0.1   ls2web.redmond.corp.microsoft.com127.0.0.1   m.adnxs.com127.0.0.1   mobile.pipe.aria.microsoft.com127.0.0.1   msedge.net127.0.0.1   msntest.serving-sys.com127.0.0.1   oca.telemetry.microsoft.com127.0.0.1   oca.telemetry.microsoft.com.nsatc.net127.0.0.1   pre.footprintpredict.com127.0.0.1   preview.msn.com127.0.0.1   rad.msn.com127.0.0.1   redir.metaservices.microsoft.com127.0.0.1   reports.wes.df.telemetry.microsoft.com127.0.0.1   schemas.microsoft.akadns.net127.0.0.1   secure.adnxs.com127.0.0.1   secure.flashtalking.com127.0.0.1   services.wes.df.telemetry.microsoft.com127.0.0.1   settings-sandbox.data.microsoft.com127.0.0.1   settings-win.data.microsoft.com127.0.0.1   settings-win-ppe.data.microsoft.com127.0.0.1   settings.data.glbdns2.microsoft.com127.0.0.1   settings.data.microsoft.com127.0.0.1   sn3301-c.1drv.com127.0.0.1   sn3301-e.1drv.com127.0.0.1   sn3301-g.1drv.com127.0.0.1   spynet2.microsoft.com127.0.0.1   spynetalt.microsoft.com127.0.0.1   spyneteurope.microsoft.akadns.net127.0.0.1   sqm.df.telemetry.microsoft.com127.0.0.1   sqm.telemetry.microsoft.com127.0.0.1   sqm.telemetry.microsoft.com.nsatc.net127.0.0.1   storecatalogrevocation.storequality.microsoft.com127.0.0.1   survey.watson.microsoft.com127.0.0.1   t0.ssl.ak.dynamic.tiles.virtualearth.net127.0.0.1   t0.ssl.ak.tiles.virtualearth.net127.0.0.1   telecommand.telemetry.microsoft.com127.0.0.1   telecommand.telemetry.microsoft.com.nsatc.net127.0.0.1   telemetry.appex.bing.net127.0.0.1   telemetry.microsoft.com127.0.0.1   telemetry.urs.microsoft.com127.0.0.1   test.activity.windows.com127.0.0.1   tsfe.trafficshaping.dsp.mp.microsoft.com127.0.0.1   v10.vortex-win.data.metron.live.com.nsatc.net127.0.0.1   v10.vortex-win.data.microsoft.com127.0.0.1   version.hybrid.api.here.com127.0.0.1   view.atdmt.com127.0.0.1   vortex-bn2.metron.live.com.nsatc.net127.0.0.1   vortex-cy2.metron.live.com.nsatc.net127.0.0.1   vortex-db5.metron.live.com.nsatc.net127.0.0.1   vortex-hk2.metron.live.com.nsatc.net127.0.0.1   vortex-sandbox.data.microsoft.com127.0.0.1   vortex-win.data.metron.live.com.nsatc.net127.0.0.1   vortex-win.data.microsoft.com127.0.0.1   vortex.data.glbdns2.microsoft.com127.0.0.1   vortex.data.metron.live.com.nsatc.net127.0.0.1   vortex.data.microsoft.com127.0.0.1   watson.microsoft.com127.0.0.1   watson.ppe.telemetry.microsoft.com127.0.0.1   watson.telemetry.microsoft.com127.0.0.1   watson.telemetry.microsoft.com.nsatc.net127.0.0.1   web.vortex.data.microsoft.com127.0.0.1   wes.df.telemetry.microsoft.com127.0.0.1   win10.ipv6.microsoft.com127.0.0.1   win1710.ipv6.microsoft.com127.0.0.1   www.msedge.net<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;文章中的思杰马克丁才是重点，其余的请忽视。如果有人使用只要复制思杰马克丁的那一段就好。切切！&lt;br&gt;对于屏蔽之后的后果，我只想说屏蔽之后我很开心。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="Hosts" scheme="https://kany.me/tags/Hosts/"/>
    
      <category term="hostname" scheme="https://kany.me/tags/hostname/"/>
    
      <category term="Linux" scheme="https://kany.me/tags/Linux/"/>
    
      <category term="Windows" scheme="https://kany.me/tags/Windows/"/>
    
      <category term="Server" scheme="https://kany.me/tags/Server/"/>
    
  </entry>
  
  <entry>
    <title>清理Windows图标缓存</title>
    <link href="https://kany.me/2019/09/18/clear-windows-icon-cache/"/>
    <id>https://kany.me/2019/09/18/clear-windows-icon-cache/</id>
    <published>2019-09-18T11:35:04.000Z</published>
    <updated>2019-09-20T08:48:26.576Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章背景"><a href="#文章背景" class="headerlink" title="文章背景"></a>文章背景</h2><blockquote><p>这是一个抄袭的文章，原文在参考资料中</p></blockquote><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><ul><li>操作系统：Windows 10 x64(1903)<a id="more"></a><h2 id="清理脚本"><a href="#清理脚本" class="headerlink" title="清理脚本"></a>清理脚本</h2></li></ul><pre class="line-numbers language-bash"><code class="language-bash">@echo offrem 关闭Windows外壳程序explorertaskkill /f /im explorer.exerem 清理系统图标缓存数据库attrib -h -s -r <span class="token string">"%userprofile%\AppData\Local\IconCache.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\IconCache.db"</span>attrib /s /d -h -s -r <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\*"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_32.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_96.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_102.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_256.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_1024.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_idx.db"</span>del /f <span class="token string">"%userprofile%\AppData\Local\Microsoft\Windows\Explorer\thumbcache_sr.db"</span>rem 清理 系统托盘记忆的图标<span class="token keyword">echo</span> y<span class="token operator">|</span>reg delete <span class="token string">"HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify"</span> /v IconStreams<span class="token keyword">echo</span> y<span class="token operator">|</span>reg delete <span class="token string">"HKEY_CLASSES_ROOT\Local Settings\Software\Microsoft\Windows\CurrentVersion\TrayNotify"</span> /v PastIconsStreamrem Win7桌面图标黑块修复工具<span class="token keyword">echo</span> y<span class="token operator">|</span>reg delete <span class="token string">"hkcu\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons"</span> /f<span class="token keyword">echo</span> y<span class="token operator">|</span>reg delete <span class="token string">"hklm\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons"</span> /ftaskkill /f /im explorer.exe <span class="token operator">&amp;</span> start explorer.exerem 重启Windows外壳程序explorerstart explorer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.csdn.net/luoyayun361/article/details/79228390" target="_blank" rel="noopener">windows清理图标缓存并重新加载</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章背景&quot;&gt;&lt;a href=&quot;#文章背景&quot; class=&quot;headerlink&quot; title=&quot;文章背景&quot;&gt;&lt;/a&gt;文章背景&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;这是一个抄袭的文章，原文在参考资料中&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;运行环境&quot;&gt;&lt;a href=&quot;#运行环境&quot; class=&quot;headerlink&quot; title=&quot;运行环境&quot;&gt;&lt;/a&gt;运行环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;操作系统：Windows 10 x64(1903)
    
    </summary>
    
    
    
      <category term="windows" scheme="https://kany.me/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>JDK的新特性</title>
    <link href="https://kany.me/2019/09/18/new-features-of-jdk/"/>
    <id>https://kany.me/2019/09/18/new-features-of-jdk/</id>
    <published>2019-09-18T08:08:47.000Z</published>
    <updated>2019-09-18T08:48:52.629Z</updated>
    
    <content type="html"><![CDATA[<h2 id="文章说明"><a href="#文章说明" class="headerlink" title="文章说明"></a>文章说明</h2><blockquote><p>本文更多的是给博主自己用于记忆使用，参考（抄袭）资料在文章后面的<a href="#参考资料">参考资料</a>中。<br>感觉这些博主都写的很不错，但是我没有注册（忘记）博客园（cnblogs）、CSDN等账号，所以参考的资料来源会贴到<a href="#参考资料">参考资料</a>中。<br>至于里面是怎么用的，可以去参考<a href="#参考资料">参考资料</a>中的文章，这里就不重复制造了。<br>要获取最新的特性等可以到<a href="https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html" target="_blank" rel="noopener">甲骨文</a>去查询</p></blockquote><a id="more"></a><h2 id="JDK5-新特性"><a href="#JDK5-新特性" class="headerlink" title="JDK5 新特性"></a>JDK5 新特性</h2><ul><li>自动拆装箱</li><li>Foreach</li><li>静态导入</li><li>可变参数 Var args</li><li>枚举</li><li>格式化输出</li><li>泛型</li><li>ProcessBuilder</li><li>内省</li><li>线程并发库（JUC）</li><li>监控和管理虚拟机</li><li>元数据</li></ul><h2 id="JDK6-新特性"><a href="#JDK6-新特性" class="headerlink" title="JDK6 新特性"></a>JDK6 新特性</h2><ul><li>Desktop类和SystemTray类</li><li>JAXB2实现对象与XML之间的映射</li><li>StAX</li><li>Compiler API</li><li>轻量级 Http Server API</li><li>插入式注解处理API(Pluggable Annotation Processing API)</li><li>用Console开发控制台程序</li><li>对脚本语言的支持（如：ruby，groovy，javascript）</li><li>Common Annotations</li></ul><h2 id="JDK7-新特性"><a href="#JDK7-新特性" class="headerlink" title="JDK7 新特性"></a>JDK7 新特性</h2><ul><li>二进制字面值</li><li>switch 语句支持 String</li><li>try-with-resources</li><li>catch多个类型异常</li><li>字面值中使用下划线</li><li>类型推断</li><li>改进泛型类型可变参数</li><li>其它</li></ul><h2 id="JDK8-新特性"><a href="#JDK8-新特性" class="headerlink" title="JDK8 新特性"></a>JDK8 新特性</h2><ul><li>Lambda 表达式</li><li>函数式接口</li><li>方法引用、构造器引用和数组引用</li><li>接口支持默认方法和静态方法</li><li>Stream API</li><li>增强类型推断</li><li>新的日期时间API</li><li>Optional类</li><li>重复注解和类型注解</li></ul><h2 id="JDK9-新特性"><a href="#JDK9-新特性" class="headerlink" title="JDK9 新特性"></a>JDK9 新特性</h2><ul><li>目录结构</li><li>模块化系统</li><li>jshell</li><li>多版本兼容JAR</li><li>接口的私有方法</li><li>改进try-with-resourcs</li><li>改进砖石操作符</li><li>限制使用单独下划线标识符</li><li>String存储结构变更</li><li>快速创建只读结合</li><li>增强Stream API</li><li>改进Optional类</li><li>多分辨率图像 API</li><li>全新HTTP客服端API</li><li>智能JAVA编译工具</li><li>统一JVM日志系统</li><li>javadoc的HTML5 支持</li><li>java 动态编译</li></ul><h2 id="JDK10-新特性"><a href="#JDK10-新特性" class="headerlink" title="JDK10 新特性"></a>JDK10 新特性</h2><ul><li>var局部变量类型推断</li><li>将JDK多存储库合并为单储存库</li><li>垃圾回收接口</li><li>并行Full GC 的G1</li><li>应用数据共享</li><li>线程局部管控</li><li>移除Native-Header Generation Tool （javah）</li><li>Unicode 标签扩展</li><li>备用内存设备上分配堆内存</li><li>基于实验JAVA 的JIT 编译器</li><li>Root 证书</li><li>基于时间的版本控制</li></ul><h2 id="JDK11-新特性"><a href="#JDK11-新特性" class="headerlink" title="JDK11 新特性"></a>JDK11 新特性</h2><ul><li>Nest-Based访问控制</li><li>动态类文件常量</li><li>改善Aarch64 intrinsic</li><li>无操作垃圾收集器</li><li>消除Java EE和CORBA模块</li><li>HTTP客户端(标准)</li><li>局部变量的语法λ参数</li><li>Curve25519和Curve448关键协议</li><li>Unicode 10</li><li>飞行记录器</li><li>ChaCha20和Poly1305加密算法</li><li>发射一列纵队源代码程序</li><li>低开销堆分析</li><li>传输层安全性(Transport Layer Security,TLS)1.3</li><li>动作:一个可伸缩的低延迟垃圾收集器 (实验)</li><li>反对Nashorn JavaScript引擎</li><li>反对Pack200工具和API</li></ul><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html" target="_blank" rel="noopener">JDK Release Notes(Oracle官方整理的)</a></li><li><a href="https://www.cnblogs.com/peter1018/p/9183959.html" target="_blank" rel="noopener">JDK各个版本的新特性</a></li><li><a href="https://blog.csdn.net/J080624/article/details/85092655" target="_blank" rel="noopener">JDK1.5，1.6，1.7，1.8，1.9，1.10，1.11的新特性整理</a></li><li><a href="https://blog.csdn.net/ranyuangang/article/details/82855017" target="_blank" rel="noopener">Java1.0-1.12各个版本的新特性</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;文章说明&quot;&gt;&lt;a href=&quot;#文章说明&quot; class=&quot;headerlink&quot; title=&quot;文章说明&quot;&gt;&lt;/a&gt;文章说明&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;本文更多的是给博主自己用于记忆使用，参考（抄袭）资料在文章后面的&lt;a href=&quot;#参考资料&quot;&gt;参考资料&lt;/a&gt;中。&lt;br&gt;感觉这些博主都写的很不错，但是我没有注册（忘记）博客园（cnblogs）、CSDN等账号，所以参考的资料来源会贴到&lt;a href=&quot;#参考资料&quot;&gt;参考资料&lt;/a&gt;中。&lt;br&gt;至于里面是怎么用的，可以去参考&lt;a href=&quot;#参考资料&quot;&gt;参考资料&lt;/a&gt;中的文章，这里就不重复制造了。&lt;br&gt;要获取最新的特性等可以到&lt;a href=&quot;https://www.oracle.com/technetwork/java/javase/jdk-relnotes-index-2162236.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;甲骨文&lt;/a&gt;去查询&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="JDK" scheme="https://kany.me/tags/JDK/"/>
    
      <category term="Java" scheme="https://kany.me/tags/Java/"/>
    
      <category term="New Features" scheme="https://kany.me/tags/New-Features/"/>
    
      <category term="What&#39;s News" scheme="https://kany.me/tags/What-s-News/"/>
    
  </entry>
  
  <entry>
    <title>旧博客的访问地址说明</title>
    <link href="https://kany.me/2019/09/17/about-old-blog/"/>
    <id>https://kany.me/2019/09/17/about-old-blog/</id>
    <published>2019-09-17T07:34:00.000Z</published>
    <updated>2019-09-17T09:35:45.546Z</updated>
    
    <content type="html"><![CDATA[<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><blockquote><p>虽然也没有多少人关注咱的这个网站，但是本着既然有这个站点就要做好的原则。<br>还是让大家知道下旧网站在什么地方，最主要的是博主很穷。所以使用了<strong>Github Pages</strong></p></blockquote><a id="more"></a><h2 id="访问地址"><a href="#访问地址" class="headerlink" title="访问地址"></a>访问地址</h2><blockquote><p>友情链接中的<a href="https://blog.kany.me" target="_blank" rel="noopener">旧博客</a>就是之前的博客地址</p></blockquote><p><strong><a href="https://blog.kany.me" target="_blank" rel="noopener">https://blog.kany.me</a></strong></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;说明&quot;&gt;&lt;a href=&quot;#说明&quot; class=&quot;headerlink&quot; title=&quot;说明&quot;&gt;&lt;/a&gt;说明&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;虽然也没有多少人关注咱的这个网站，但是本着既然有这个站点就要做好的原则。&lt;br&gt;还是让大家知道下旧网站在什么地方，最主要的是博主很穷。所以使用了&lt;strong&gt;Github Pages&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="旧博客" scheme="https://kany.me/tags/%E6%97%A7%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>Docker Compose 部署Nginx、Mariadb、Nacos-Server</title>
    <link href="https://kany.me/2019/09/12/docker-compose-install-nginx-mariadb-nacos-server/"/>
    <id>https://kany.me/2019/09/12/docker-compose-install-nginx-mariadb-nacos-server/</id>
    <published>2019-09-12T07:55:10.000Z</published>
    <updated>2019-09-12T07:58:54.779Z</updated>
    
    <content type="html"><![CDATA[<h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><ul><li>OS：Ubuntu Server 16.04.1 LTS 64位</li><li>Docker：19.03.1</li><li>Docker Compose：1.24.1</li></ul><h2 id="编写配置文件"><a href="#编写配置文件" class="headerlink" title="编写配置文件"></a>编写配置文件</h2><blockquote><p>在前面的文章中我们使用<strong>Dockerfile</strong>编写了文件，如果物理机重启之后每次我们都要手动处理关联项目，比较麻烦。<br>Docker Compose使用的是<strong>docker-compose.yml</strong>文件来配置的。所以我们来编写配置文件。</p></blockquote><a id="more"></a><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># 版本</span><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.1'</span><span class="token comment" spellcheck="true"># 服务配置</span><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># Nginx配置</span>  <span class="token key atrule">nginx-server</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 镜像名称</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>latest    <span class="token comment" spellcheck="true"># 容器名称</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>server    <span class="token comment" spellcheck="true"># 是否开机启动</span>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token comment" spellcheck="true"># 文件夹映射</span>    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> /data/nginx/conf/nginx.conf<span class="token punctuation">:</span>/etc/nginx/nginx.conf<span class="token punctuation">:</span>ro <span class="token comment" spellcheck="true"># ro表示只读，read only</span>      <span class="token punctuation">-</span> /data/nginx/logs<span class="token punctuation">:</span>/var/log/nginx      <span class="token punctuation">-</span> /data/nginx/sites<span class="token punctuation">:</span>/etc/nginx/conf.d<span class="token punctuation">:</span>ro      <span class="token punctuation">-</span> /data/nginx/ssl<span class="token punctuation">:</span>/etc/nginx/ssl<span class="token punctuation">:</span>ro      <span class="token punctuation">-</span> /data/nginx/html<span class="token punctuation">:</span>/usr/share/nginx/html<span class="token punctuation">:</span>ro    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"80:80"</span>      <span class="token punctuation">-</span> <span class="token string">"443:443"</span>    <span class="token comment" spellcheck="true"># 定义网络</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        <span class="token key atrule">ipv4_address</span><span class="token punctuation">:</span> 172.18.0.2  <span class="token comment" spellcheck="true"># 数据库配置</span>  <span class="token key atrule">mariadb-server</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 镜像名称</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">:</span>latest    <span class="token comment" spellcheck="true"># 容器名称</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mariadb<span class="token punctuation">-</span>server    <span class="token comment" spellcheck="true"># 是否开机启动</span>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token comment" spellcheck="true"># 环境变量</span>    <span class="token key atrule">environment</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 配置数据库密码</span>      <span class="token punctuation">-</span> MYSQL_ROOT_PASSWORD<span class="token punctuation">:</span>数据库密码    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> /data/mariadb/conf<span class="token punctuation">:</span>/etc/mysql/conf.d<span class="token punctuation">:</span>ro      <span class="token punctuation">-</span> /data/mariadb/logs<span class="token punctuation">:</span>/var/log/mysql      <span class="token punctuation">-</span> /data/mariadb/data<span class="token punctuation">:</span>/var/lib/mysql    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"3306:3306"</span>    <span class="token comment" spellcheck="true"># 指定启动顺序</span>    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> nginx<span class="token punctuation">-</span>server    <span class="token comment" spellcheck="true"># 定义网络</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        <span class="token key atrule">ipv4_address</span><span class="token punctuation">:</span> 172.18.0.3  <span class="token comment" spellcheck="true"># nacos-master</span>  <span class="token key atrule">nacos-mater</span><span class="token punctuation">:</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span>1.1.3    <span class="token comment" spellcheck="true"># 容器名称</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>mater    <span class="token comment" spellcheck="true"># 是否开机启动</span>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token comment" spellcheck="true"># 配置环境变量文件</span>    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> ./env/nacos<span class="token punctuation">-</span>ip.env    <span class="token comment" spellcheck="true"># 映射数据卷</span>    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> /data/nacos/cluster1/conf/cluster.conf<span class="token punctuation">:</span>/usr/local/nacos/conf/cluster.conf      <span class="token punctuation">-</span> /data/nacos/cluster1/conf/application.properties<span class="token punctuation">:</span>/usr/local/nacos/conf/application.properties<span class="token punctuation">:</span>ro      <span class="token punctuation">-</span> /data/nacos/cluster1/logs<span class="token punctuation">:</span>/usr/local/nacos/logs      <span class="token punctuation">-</span> /data/nacos/cluster1/data<span class="token punctuation">:</span>/usr/local/nacos/data    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"8848:8848"</span>      <span class="token punctuation">-</span> <span class="token string">"9555:9555"</span>    <span class="token comment" spellcheck="true"># 指定启动顺序</span>    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> mariadb<span class="token punctuation">-</span>server    <span class="token comment" spellcheck="true"># 定义网络</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        <span class="token key atrule">ipv4_address</span><span class="token punctuation">:</span> 172.18.0.4  <span class="token comment" spellcheck="true"># nacos-slave</span>  <span class="token key atrule">nacos-slave</span><span class="token punctuation">:</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span>1.1.3    <span class="token comment" spellcheck="true"># 容器名称</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nacos<span class="token punctuation">-</span>slave    <span class="token comment" spellcheck="true"># 是否开机启动</span>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token comment" spellcheck="true"># 配置环境变量文件</span>    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> ./env/nacos<span class="token punctuation">-</span>ip.env    <span class="token comment" spellcheck="true"># 映射数据卷</span>    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> /data/nacos/cluster2/conf/cluster.conf<span class="token punctuation">:</span>/usr/local/nacos/conf/cluster.conf      <span class="token punctuation">-</span> /data/nacos/cluster2/conf/application.properties<span class="token punctuation">:</span>/usr/local/nacos/conf/application.properties<span class="token punctuation">:</span>ro      <span class="token punctuation">-</span> /data/nacos/cluster2/logs<span class="token punctuation">:</span>/usr/local/nacos/logs      <span class="token punctuation">-</span> /data/nacos/cluster2/data<span class="token punctuation">:</span>/usr/local/nacos/data    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token string">"8849:8848"</span>    <span class="token comment" spellcheck="true"># 指定启动顺序</span>    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> mariadb<span class="token punctuation">-</span>server    <span class="token comment" spellcheck="true"># 定义网络</span>    <span class="token key atrule">networks</span><span class="token punctuation">:</span>      <span class="token comment" spellcheck="true"># 加入的网络的名称</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># ipv4的ip地址</span>        <span class="token key atrule">ipv4_address</span><span class="token punctuation">:</span> 172.18.0.5<span class="token comment" spellcheck="true">#定义网络组</span><span class="token key atrule">networks</span><span class="token punctuation">:</span>  <span class="token comment" spellcheck="true"># 网络组名称</span>  <span class="token key atrule">app</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># 网络的模式</span>    <span class="token key atrule">driver</span><span class="token punctuation">:</span> bridge    <span class="token comment" spellcheck="true"># 配置网络</span>    <span class="token key atrule">ipam</span><span class="token punctuation">:</span>      <span class="token key atrule">driver</span><span class="token punctuation">:</span> default      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true">## ip地址网络 这里宿主机一般会是该网段的 172.17.0.1,所以不要设置自网段为1</span>        <span class="token punctuation">-</span> <span class="token key atrule">subnet</span><span class="token punctuation">:</span> 172.18.0.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>上面用到的<strong>nacos-ip.env</strong>文件内容如下：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash">NACOS_SERVERS<span class="token operator">=</span>172.18.0.4:8848 172.18.0.5:8848MYSQL_MASTER_SERVICE_HOST<span class="token operator">=</span>172.18.0.3MYSQL_MASTER_SERVICE_PORT<span class="token operator">=</span>3306MYSQL_MASTER_SERVICE_DB_NAME<span class="token operator">=</span>nacos_configMYSQL_MASTER_SERVICE_USER<span class="token operator">=</span>rootMYSQL_MASTER_SERVICE_PASSWORD<span class="token operator">=</span>数据库密码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>查看docker的网络使用如下命令：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 查看目前已有的网络</span>docker network <span class="token function">ls</span><span class="token comment" spellcheck="true"># 查看目前的网络</span>docker network inspect <span class="token operator">&lt;</span>Network Id<span class="token operator">></span><span class="token comment" spellcheck="true"># 删除目前的网络</span>docker network <span class="token function">rm</span> <span class="token operator">&lt;</span>Network Id<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="参考数据"><a href="#参考数据" class="headerlink" title="参考数据"></a>参考数据</h2><ul><li><a href="https://blog.csdn.net/qq_28478281/article/details/84105079" target="_blank" rel="noopener">docker-compose 结合nginx实现跨容器转发</a></li><li><a href="https://blog.csdn.net/Kiloveyousmile/article/details/79830810" target="_blank" rel="noopener">docker-compose网络设置之networks</a></li><li><a href="https://blog.csdn.net/qq_36148847/article/details/79427878" target="_blank" rel="noopener">docker-compose.yml 配置文件编写详解</a></li><li><a href="https://blog.csdn.net/lobber1987/article/details/79045494" target="_blank" rel="noopener">Docker network命令</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;软件环境&quot;&gt;&lt;a href=&quot;#软件环境&quot; class=&quot;headerlink&quot; title=&quot;软件环境&quot;&gt;&lt;/a&gt;软件环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;OS：Ubuntu Server 16.04.1 LTS 64位&lt;/li&gt;
&lt;li&gt;Docker：19.03.1&lt;/li&gt;
&lt;li&gt;Docker Compose：1.24.1&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;编写配置文件&quot;&gt;&lt;a href=&quot;#编写配置文件&quot; class=&quot;headerlink&quot; title=&quot;编写配置文件&quot;&gt;&lt;/a&gt;编写配置文件&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在前面的文章中我们使用&lt;strong&gt;Dockerfile&lt;/strong&gt;编写了文件，如果物理机重启之后每次我们都要手动处理关联项目，比较麻烦。&lt;br&gt;Docker Compose使用的是&lt;strong&gt;docker-compose.yml&lt;/strong&gt;文件来配置的。所以我们来编写配置文件。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="docker-compose" scheme="https://kany.me/tags/docker-compose/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
      <category term="database" scheme="https://kany.me/tags/database/"/>
    
      <category term="mariadb" scheme="https://kany.me/tags/mariadb/"/>
    
      <category term="mysql" scheme="https://kany.me/tags/mysql/"/>
    
      <category term="nginx" scheme="https://kany.me/tags/nginx/"/>
    
      <category term="nacos" scheme="https://kany.me/tags/nacos/"/>
    
      <category term="nacos-server" scheme="https://kany.me/tags/nacos-server/"/>
    
  </entry>
  
  <entry>
    <title>安装 Docker Compose</title>
    <link href="https://kany.me/2019/09/12/docker-compose-install/"/>
    <id>https://kany.me/2019/09/12/docker-compose-install/</id>
    <published>2019-09-12T07:51:11.000Z</published>
    <updated>2019-09-12T07:53:58.795Z</updated>
    
    <content type="html"><![CDATA[<h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><ul><li>OS：Ubuntu Server 16.04.1 LTS 64位</li><li>Docker：19.03.1</li></ul><h2 id="使用原因"><a href="#使用原因" class="headerlink" title="使用原因"></a>使用原因</h2><blockquote><p>Dockerfile创建的容器有如下缺点：</p><ul><li>不能开机随系统启动</li><li>启动顺序未知</li></ul><p>所以我们需要使用到Docker容器的进阶 Docker Compose</p></blockquote><a id="more"></a><h2 id="安装Doker-Compose"><a href="#安装Doker-Compose" class="headerlink" title="安装Doker Compose"></a>安装Doker Compose</h2><blockquote><p>文件地址：<a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">https://github.com/docker/compose/releases</a></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> curl -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> -o /usr/local/bin/docker-compose<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>网络好的同学可以使用这个命令来获取，如果不好的情况下建议直接下载好之后传上去。</p></blockquote><p>将文件放置到<strong>/usr/local/bin/</strong>文件夹下，并添加执行权限：</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://github.com/docker/compose/" target="_blank" rel="noopener">Docker Compose GitHub</a></li><li><a href="https://www.cnblogs.com/nieqibest/p/9846655.html" target="_blank" rel="noopener">centos7 安装 docker 和 docker compose</a></li><li><a href="https://blog.csdn.net/now19930616/article/details/85235016" target="_blank" rel="noopener">docker-compose 安装</a></li><li><a href="https://docs.docker.com/compose/" target="_blank" rel="noopener">Docker Compose Docs</a>*****</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;软件环境&quot;&gt;&lt;a href=&quot;#软件环境&quot; class=&quot;headerlink&quot; title=&quot;软件环境&quot;&gt;&lt;/a&gt;软件环境&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;OS：Ubuntu Server 16.04.1 LTS 64位&lt;/li&gt;
&lt;li&gt;Docker：19.03.1&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;使用原因&quot;&gt;&lt;a href=&quot;#使用原因&quot; class=&quot;headerlink&quot; title=&quot;使用原因&quot;&gt;&lt;/a&gt;使用原因&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Dockerfile创建的容器有如下缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不能开机随系统启动&lt;/li&gt;
&lt;li&gt;启动顺序未知&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;所以我们需要使用到Docker容器的进阶 Docker Compose&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="docker-compose" scheme="https://kany.me/tags/docker-compose/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
  </entry>
  
  <entry>
    <title>Docker 安装 Nacos Server</title>
    <link href="https://kany.me/2019/09/12/docker-install-nacos-server/"/>
    <id>https://kany.me/2019/09/12/docker-install-nacos-server/</id>
    <published>2019-09-12T07:46:36.000Z</published>
    <updated>2019-09-12T09:23:12.645Z</updated>
    
    <content type="html"><![CDATA[<h2 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h2><blockquote><ul><li>OS：Ubuntu Server 16.04.1 LTS 64位</li><li>Docker：19.03.1</li><li>Nacos Server：1.1.3<ul><li>nacos-sever-01：172.17.0.7 </li><li>nacos-sever-02：172.17.0.8</li></ul></li><li>文件目录：<ul><li>/data/nacos/{cluster1,cluster2}/{data,conf,logs}</li></ul></li></ul></blockquote><h2 id="学习目的"><a href="#学习目的" class="headerlink" title="学习目的"></a>学习目的</h2><blockquote><p>学会自己构建<strong>Nacos Server</strong>，不依赖官方的<strong>nacos/nacos-server:last</strong>镜像。<br>参考了很多别人构建的镜像<a href="https://hub.docker.com/search?q=nacos&type=image" target="_blank" rel="noopener">https://hub.docker.com/search?q=nacos&amp;type=image</a>，发现别人写的都很简单。但是自己的始终不能像其他人一样简单的运行起来。<br>比如下面的例子：</p></blockquote><a id="more"></a><pre class="line-numbers language-dockerfile"><code class="language-dockerfile">FROM zhegeshijiehuiyouai/java:1.8ENV MODE="standalone"ADD nacos-server-1.1.3.tar.gz /usr/local/ADD cluster.conf /usr/local/nacos/conf/ADD entrypoint.sh /EXPOSE 8848ENTRYPOINT ["/entrypoint.sh"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>完整地址：<a href="https://github.com/zhegeshijiehuiyouai/RoadToDevOps/blob/master/03-Dockerfile/01-nacos" target="_blank" rel="noopener">https://github.com/zhegeshijiehuiyouai/RoadToDevOps/blob/master/03-Dockerfile/01-nacos</a><br>反正我是怎么都没有运行起来。<br>但是使用v1.0.0的<strong>startup.sh</strong>运行v1.1.3的<strong>nacos-server.jar</strong>，采用standalone方式是可以运行起来的，使用集群就不成。<br>进入到镜像里面，再调用<strong>startup.sh</strong>集群是可以起来的。<br>所以这个到底是什么原因呢？就因为这个东西折腾已经三天。对此不想多说什么。<br>截至发文，还有集群列表不能正常显示的问题。目前也不知道能不能注册，待测试。</p></blockquote><h2 id="构建Nacos需要JDK镜像"><a href="#构建Nacos需要JDK镜像" class="headerlink" title="构建Nacos需要JDK镜像"></a>构建Nacos需要JDK镜像</h2><p><strong>Dockerfile文件内容：</strong></p><pre class="line-numbers language-dockerfile"><code class="language-dockerfile"># 一定要使用FROM开头FROM openjdk:8u191-jre-alpine# 作者信息LABEL author="Jason.Wang"LABEL version="8u191"# 执行的命令RUN apk update; \    apk add --no-cache; \    apk --no-cache add tzdata; \    ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime; \    echo "Asia/Shanghai" > /etc/timezone;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>创建好之后执行<code>docker build . --tag jdk:8u191</code>这样就会创建一个JDK的镜像文件</p><h2 id="构建Nacos"><a href="#构建Nacos" class="headerlink" title="构建Nacos"></a>构建Nacos</h2><p><strong>Dockerfile文件内容：</strong></p><pre class="line-numbers language-dockerfile"><code class="language-dockerfile">FROM jdk:8u191MAINTAINER "kzone.wang@gmail.com"LABEL author="Jason.Wang"LABEL version="1.1.3"# set environmentENV MODE="cluster" \    PREFER_HOST_MODE="ip" \    BASE_DIR="/usr/local/nacos" \    CLASSPATH=".:/usr/local/nacos/conf:$CLASSPATH" \    NACOS_SERVERS="172.17.0.3:8848" \    CLUSTER_CONF="/usr/local/nacos/conf/cluster.conf" \    FUNCTION_MODE="all" \    JAVA_HOME="/usr/lib/jvm/java-1.8-openjdk/jre" \    NACOS_USER="nacos" \    JAVA="/usr/lib/jvm/java-1.8-openjdk/jre/bin/java" \    JVM_XMS="2g" \    JVM_XMX="2g" \    JVM_XMN="1g" \    JVM_MS="128m" \    JVM_MMS="320m" \    NACOS_DEBUG="n" \    TOMCAT_ACCESSLOG_ENABLED="false"ARG NACOS_VERSION=1.1.3WORKDIR /$BASE_DIRRUN  cd /usr/local; \    wget && wget https://github.com/alibaba/nacos/releases/download/${NACOS_VERSION}/nacos-server-${NACOS_VERSION}.tar.gz -P; \    tar -zxf nacos-server-${NACOS_VERSION}.tar.gz; \    rm -rf nacos-server-${NACOS_VERSION}.tar.gz;ADD docker-startup.sh bin/docker-startup.sh# Set startup log dirRUN mkdir -p logs \        && cd logs \        && touch start.out \        && ln -sf /dev/stdout start.out \        && ln -sf /dev/stderr start.outRUN chmod +x bin/docker-startup.shEXPOSE 8848ENTRYPOINT ["bin/docker-startup.sh"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="使用CentOS直接构建"><a href="#使用CentOS直接构建" class="headerlink" title="使用CentOS直接构建"></a>使用CentOS直接构建</h2><p><strong>Dockerfile文件内容：</strong></p><pre class="line-numbers language-dockerfile"><code class="language-dockerfile">FROM centos:7.5.1804MAINTAINER "kzone.wang@gmail.com"LABEL author="Jason.Wang"LABEL version="1.1.3"# set environmentENV MODE="cluster" \    PREFER_HOST_MODE="ip"\    BASE_DIR="/usr/local/nacos" \    CLASSPATH=".:/usr/local/nacos/conf:$CLASSPATH" \    CLUSTER_CONF="/usr/local/nacos/conf/cluster.conf" \    FUNCTION_MODE="all" \    JAVA_HOME="/usr/lib/jvm/java-1.8.0-openjdk" \    NACOS_USER="nacos" \    JAVA="/usr/lib/jvm/java-1.8.0-openjdk/bin/java" \    JVM_XMS="2g" \    JVM_XMX="2g" \    JVM_XMN="1g" \    JVM_MS="128m" \    JVM_MMS="320m" \    NACOS_DEBUG="n" \    TOMCAT_ACCESSLOG_ENABLED="false" \    TIME_ZONE="Asia/Shanghai"ARG NACOS_VERSION=1.1.3WORKDIR /$BASE_DIRRUN set -x \    && yum update -y \    && yum install -y java-1.8.0-openjdk java-1.8.0-openjdk-devel wget iputils nc  vim libcurl\    && wget https://github.com/alibaba/nacos/releases/download/${NACOS_VERSION}/nacos-server-${NACOS_VERSION}.tar.gz -P /usr/local \    && tar -xzvf /usr/local/nacos-server-${NACOS_VERSION}.tar.gz -C /usr/local \    && rm -rf /usr/local/nacos-server-${NACOS_VERSION}.tar.gz /usr/local/nacos/bin/* /usr/local/nacos/conf/*.properties /usr/local/nacos/conf/*.example /usr/local/nacos/conf/nacos-mysql.sql \    && yum autoremove -y wget \    && ln -snf /usr/share/zoneinfo/$TIME_ZONE /etc/localtime && echo '$TIME_ZONE' > /etc/timezone \    && yum clean allADD docker-startup.sh bin/docker-startup.sh# Set startup log dirRUN mkdir -p logs \    && cd logs \    && touch start.out \    && ln -sf /dev/stdout start.out \    && ln -sf /dev/stderr start.outRUN chmod +x bin/docker-startup.shEXPOSE 8848ENTRYPOINT ["bin/docker-startup.sh"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Nacos-Server启动脚本"><a href="#Nacos-Server启动脚本" class="headerlink" title="Nacos Server启动脚本"></a>Nacos Server启动脚本</h2><blockquote><p>这个脚本是阿里巴巴nacos编写的，但是我进行了修改，<strong>我使用的jdk:8u191没有/bin/bash，只有/bin/sh</strong>这里进行了修改，其他的不知道了。</p></blockquote><p><strong>docker-startup.sh文件内容：</strong></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span><span class="token comment" spellcheck="true"># Copyright 1999-2018 Alibaba Group Holding Ltd.</span><span class="token comment" spellcheck="true"># Licensed under the Apache License, Version 2.0 (the "License");</span><span class="token comment" spellcheck="true"># you may not use this file except in compliance with the License.</span><span class="token comment" spellcheck="true"># You may obtain a copy of the License at</span><span class="token comment" spellcheck="true">#      http://www.apache.org/licenses/LICENSE-2.0</span><span class="token comment" spellcheck="true">#</span><span class="token comment" spellcheck="true"># Unless required by applicable law or agreed to in writing, software</span><span class="token comment" spellcheck="true"># distributed under the License is distributed on an "AS IS" BASIS,</span><span class="token comment" spellcheck="true"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><span class="token comment" spellcheck="true"># See the License for the specific language governing permissions and</span><span class="token comment" spellcheck="true"># limitations under the License.</span><span class="token keyword">set</span> -x<span class="token function">export</span> DEFAULT_SEARCH_LOCATIONS<span class="token operator">=</span><span class="token string">"classpath:/,classpath:/config/,file:./,file:./config/"</span><span class="token function">export</span> CUSTOM_SEARCH_LOCATIONS<span class="token operator">=</span><span class="token variable">${DEFAULT_SEARCH_LOCATIONS}</span>,file:<span class="token variable">${BASE_DIR}</span>/conf/,<span class="token variable">${BASE_DIR}</span>/init.d/<span class="token function">export</span> CUSTOM_SEARCH_NAMES<span class="token operator">=</span><span class="token string">"application,custom"</span>PLUGINS_DIR<span class="token operator">=</span><span class="token string">"/home/nacos/plugins/peer-finder"</span><span class="token keyword">function</span> print_servers<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -d <span class="token string">"<span class="token variable">${PLUGINS_DIR}</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    <span class="token keyword">echo</span> <span class="token string">"#it is ip"</span> <span class="token operator">></span> <span class="token string">"<span class="token variable">$CLUSTER_CONF</span>"</span>    <span class="token keyword">for</span> server <span class="token keyword">in</span> <span class="token variable">${NACOS_SERVERS}</span><span class="token punctuation">;</span> <span class="token keyword">do</span>            <span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$server</span>"</span> <span class="token operator">>></span> <span class="token string">"<span class="token variable">$CLUSTER_CONF</span>"</span>    <span class="token keyword">done</span>   <span class="token keyword">else</span>    sh <span class="token variable">$PLUGINS_DIR</span>/plugin.sh   <span class="token function">sleep</span> 30        <span class="token keyword">fi</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">#===========================================================================================</span><span class="token comment" spellcheck="true"># JVM Configuration</span><span class="token comment" spellcheck="true">#===========================================================================================</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${MODE}</span>"</span> <span class="token operator">==</span> <span class="token string">"standalone"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Xms512m -Xmx512m -Xmn256m"</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.standalone=true"</span><span class="token keyword">else</span>  <span class="token comment" spellcheck="true">#JAVA_OPT="${JAVA_OPT} -server -Xms${JVM_XMS} -Xmx${JVM_XMX} -Xmn${JVM_XMN} -XX:MetaspaceSize=${JVM_MS} -XX:MaxMetaspaceSize=${JVM_MMS}"</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -server"</span>  <span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${NACOS_DEBUG}</span>"</span> <span class="token operator">==</span> <span class="token string">"y"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Xdebug -Xrunjdwp:transport=dt_socket,address=9555,server=y,suspend=n"</span>  <span class="token keyword">fi</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=<span class="token variable">${BASE_DIR}</span>/logs/java_heapdump.hprof"</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -XX:-UseLargePages"</span>  print_servers<span class="token keyword">fi</span><span class="token comment" spellcheck="true">#===========================================================================================</span><span class="token comment" spellcheck="true"># Setting system properties</span><span class="token comment" spellcheck="true">#===========================================================================================</span><span class="token comment" spellcheck="true"># set  mode that Nacos Server function of split</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${FUNCTION_MODE}</span>"</span> <span class="token operator">==</span> <span class="token string">"config"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.functionMode=config"</span><span class="token keyword">elif</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${FUNCTION_MODE}</span>"</span> <span class="token operator">==</span> <span class="token string">"naming"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.functionMode=naming"</span><span class="token keyword">fi</span><span class="token comment" spellcheck="true"># set nacos server ip</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -z <span class="token string">"<span class="token variable">${NACOS_SERVER_IP}</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.server.ip=<span class="token variable">${NACOS_SERVER_IP}</span>"</span><span class="token keyword">fi</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -z <span class="token string">"<span class="token variable">${USE_ONLY_SITE_INTERFACES}</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.inetutils.use-only-site-local-interfaces=<span class="token variable">${USE_ONLY_SITE_INTERFACES}</span>"</span><span class="token keyword">fi</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -z <span class="token string">"<span class="token variable">${PREFERRED_NETWORKS}</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.inetutils.preferred-networks=<span class="token variable">${PREFERRED_NETWORKS}</span>"</span><span class="token keyword">fi</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">!</span> -z <span class="token string">"<span class="token variable">${IGNORED_INTERFACES}</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.inetutils.ignored-interfaces=<span class="token variable">${IGNORED_INTERFACES}</span>"</span><span class="token keyword">fi</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">${PREFER_HOST_MODE}</span>"</span> <span class="token operator">==</span> <span class="token string">"hostname"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>    JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.preferHostnameOverIp=true"</span><span class="token keyword">fi</span>JAVA_MAJOR_VERSION<span class="token operator">=</span><span class="token punctuation">$(</span><span class="token variable">$JAVA</span> -version 2<span class="token operator">></span><span class="token operator">&amp;</span>1 <span class="token operator">|</span> <span class="token function">sed</span> -E -n <span class="token string">'s/.* version "([0-9]*).*$/\1/p'</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$JAVA_MAJOR_VERSION</span>"</span> -ge <span class="token string">"9"</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Xlog:gc*:file=<span class="token variable">${BASE_DIR}</span>/logs/nacos_gc.log:time,tags:filecount=10,filesize=102400"</span><span class="token keyword">else</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Djava.ext.dirs=<span class="token variable">${JAVA_HOME}</span>/jre/lib/ext:<span class="token variable">${JAVA_HOME}</span>/lib/ext:<span class="token variable">${BASE_DIR}</span>/plugins/cmdb"</span>  JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Xloggc:<span class="token variable">${BASE_DIR}</span>/logs/nacos_gc.log -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=100M"</span><span class="token keyword">fi</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -Dnacos.home=<span class="token variable">${BASE_DIR}</span>"</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> -jar <span class="token variable">${BASE_DIR}</span>/target/nacos-server.jar"</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> <span class="token variable">${JAVA_OPT_EXT}</span>"</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> --spring.config.location=<span class="token variable">${CUSTOM_SEARCH_LOCATIONS}</span>"</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> --spring.config.name=<span class="token variable">${CUSTOM_SEARCH_NAMES}</span>"</span>JAVA_OPT<span class="token operator">=</span><span class="token string">"<span class="token variable">${JAVA_OPT}</span> --logging.config=<span class="token variable">${BASE_DIR}</span>/conf/nacos-logback.xml"</span><span class="token keyword">echo</span> <span class="token string">"nacos is starting,you can check the <span class="token variable">${BASE_DIR}</span>/logs/start.out"</span><span class="token keyword">echo</span> <span class="token string">"<span class="token variable">$JAVA</span> <span class="token variable">${JAVA_OPT}</span>"</span> <span class="token operator">></span> <span class="token variable">${BASE_DIR}</span>/logs/start.out 2<span class="token operator">></span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span><span class="token function">nohup</span> <span class="token variable">$JAVA</span> <span class="token variable">${JAVA_OPT}</span> <span class="token operator">></span> <span class="token variable">${BASE_DIR}</span>/logs/start.out 2<span class="token operator">></span><span class="token operator">&amp;</span>1 <span class="token operator">&lt;</span> /dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h2><blockquote><p><strong>docker build . –tag nacos:1.1.3</strong></p></blockquote><h2 id="启动脚本及配置"><a href="#启动脚本及配置" class="headerlink" title="启动脚本及配置"></a>启动脚本及配置</h2><blockquote><p>这里只贴出<strong>nacos-server-01.sh</strong>的内容</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span><span class="token function">sudo</span> <span class="token function">rm</span> -rf /data/nacos/cluster1/<span class="token punctuation">{</span>data,logs<span class="token punctuation">}</span>/*docker stop nacos-server-01docker <span class="token function">rm</span> nacos-server-01docker run --name nacos-server-01 --hostname nacos-server-01 -p 8848:8848 -p 9555:9555 -e NACOS_SERVERS<span class="token operator">=</span><span class="token string">"172.17.0.7:8848 172.17.0.8:8848"</span> -v /data/nacos/cluster1/conf/cluster.conf:/usr/local/nacos/conf/cluster.conf -v /data/nacos/cluster1/conf/application.properties:/usr/local/nacos/conf/application.properties -v /data/nacos/cluster1/logs:/usr/local/nacos/logs -v /data/nacos/cluster1/data:/usr/local/nacos/data -d nacos:1.1.3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>/data/nacos/cluster1/conf/cluster.conf</strong>的内容：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 这个就一个空文件，由于在上面的NACOS_SERVERS会传入，所以这里不用传入</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p><strong>/data/nacos/cluster1/conf/application.properties</strong>的内容：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># spring</span><span class="token comment" spellcheck="true"># 注意这个地方不要修改，我修改成“/”然后那个集群节点一个都没有出来了</span>server.contextPath<span class="token operator">=</span>/nacos<span class="token comment" spellcheck="true"># 和上面一样</span>server.servlet.contextPath<span class="token operator">=</span>/nacosserver.port<span class="token operator">=</span>8848nacos.cmdb.dumpTaskInterval<span class="token operator">=</span>3600nacos.cmdb.eventTaskInterval<span class="token operator">=</span>10nacos.cmdb.labelTaskInterval<span class="token operator">=</span>300nacos.cmdb.loadDataAtStart<span class="token operator">=</span>false<span class="token comment" spellcheck="true"># metrics for prometheus</span><span class="token comment" spellcheck="true">#management.endpoints.web.exposure.include=*</span><span class="token comment" spellcheck="true"># metrics for elastic search</span>management.metrics.export.elastic.enabled<span class="token operator">=</span>false<span class="token comment" spellcheck="true">#management.metrics.export.elastic.host=http://localhost:9200</span><span class="token comment" spellcheck="true"># metrics for influx</span>management.metrics.export.influx.enabled<span class="token operator">=</span>false<span class="token comment" spellcheck="true">#management.metrics.export.influx.db=springboot</span><span class="token comment" spellcheck="true">#management.metrics.export.influx.uri=http://localhost:8086</span><span class="token comment" spellcheck="true">#management.metrics.export.influx.auto-create-db=true</span><span class="token comment" spellcheck="true">#management.metrics.export.influx.consistency=one</span><span class="token comment" spellcheck="true">#management.metrics.export.influx.compressed=true</span>server.tomcat.accesslog.enabled<span class="token operator">=</span>trueserver.tomcat.accesslog.pattern<span class="token operator">=</span>%h %l %u %t <span class="token string">"%r"</span> %s %b %D %<span class="token punctuation">{</span>User-Agent<span class="token punctuation">}</span>i<span class="token comment" spellcheck="true"># default current work dir</span>server.tomcat.basedir<span class="token operator">=</span><span class="token comment" spellcheck="true">## spring security config</span><span class="token comment" spellcheck="true">### turn off security</span><span class="token comment" spellcheck="true">#spring.security.enabled=false</span><span class="token comment" spellcheck="true">#management.security=false</span><span class="token comment" spellcheck="true">#security.basic.enabled=false</span><span class="token comment" spellcheck="true">#nacos.security.ignore.urls=/**</span>nacos.security.ignore.urls<span class="token operator">=</span>/,/**/*.css,/**/*.js,/**/*.html,/**/*.map,/**/*.svg,/**/*.png,/**/*.ico,/console-fe/public/**,/v1/auth/login,/v1/console/health/**,/v1/cs/**,/v1/ns/**,/v1/cmdb/**,/actuator/**,/v1/console/server/**nacos.naming.distro.taskDispatchThreadCount<span class="token operator">=</span>1nacos.naming.distro.taskDispatchPeriod<span class="token operator">=</span>200nacos.naming.distro.batchSyncKeyCount<span class="token operator">=</span>1000nacos.naming.distro.initDataRatio<span class="token operator">=</span>0.9nacos.naming.distro.syncRetryDelay<span class="token operator">=</span>5000nacos.naming.data.warmup<span class="token operator">=</span>truenacos.naming.expireInstance<span class="token operator">=</span>truedb.num<span class="token operator">=</span>1db.url.0<span class="token operator">=</span>jdbc:mysql://<span class="token punctuation">{</span>mysql_server_address<span class="token punctuation">}</span>:<span class="token punctuation">{</span>mysql_server_port<span class="token punctuation">}</span>/nacos_config?characterEncoding<span class="token operator">=</span>utf8<span class="token operator">&amp;</span>connectTimeout<span class="token operator">=</span>1000<span class="token operator">&amp;</span>socketTimeout<span class="token operator">=</span>3000<span class="token operator">&amp;</span>autoReconnect<span class="token operator">=</span>truedb.user<span class="token operator">=</span><span class="token punctuation">{</span>mysql_user_name<span class="token punctuation">}</span>db.password<span class="token operator">=</span><span class="token punctuation">{</span>mysql_pass_word<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>到这里基本配置完成了</p></blockquote><h2 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h2><pre class="line-numbers language-nginx"><code class="language-nginx"><span class="token keyword">upstream</span> nacos<span class="token operator">-</span><span class="token keyword">server</span> <span class="token punctuation">{</span>  <span class="token keyword">server</span> <span class="token number">172.17</span><span class="token punctuation">.</span><span class="token number">0.7</span><span class="token punctuation">:</span><span class="token number">8848</span><span class="token punctuation">;</span>  <span class="token keyword">server</span> <span class="token number">172.17</span><span class="token punctuation">.</span><span class="token number">0.8</span><span class="token punctuation">:</span><span class="token number">8848</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">server</span> <span class="token punctuation">{</span>  <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>  <span class="token keyword">listen</span> <span class="token number">443</span> <span class="token keyword">ssl</span> http2<span class="token punctuation">;</span>  <span class="token keyword">ssl_certificate</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span><span class="token keyword">ssl</span><span class="token operator">/</span>domain<span class="token punctuation">.</span>com<span class="token punctuation">.</span>crt<span class="token punctuation">;</span>  <span class="token keyword">ssl_certificate_key</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span><span class="token keyword">ssl</span><span class="token operator">/</span>domain<span class="token punctuation">.</span>com<span class="token punctuation">.</span>key<span class="token punctuation">;</span>  <span class="token keyword">ssl_protocols</span> TLSv1 TLSv1<span class="token number">.1</span> TLSv1<span class="token number">.2</span><span class="token punctuation">;</span>  <span class="token keyword">ssl_ciphers</span> EECDH<span class="token operator">+</span>CHACHA20<span class="token punctuation">:</span>EECDH<span class="token operator">+</span>AES128<span class="token punctuation">:</span>RSA<span class="token operator">+</span>AES128<span class="token punctuation">:</span>EECDH<span class="token operator">+</span>AES256<span class="token punctuation">:</span>RSA<span class="token operator">+</span>AES256<span class="token punctuation">:</span>EECDH<span class="token operator">+</span>3DES<span class="token punctuation">:</span>RSA<span class="token operator">+</span>3DES<span class="token punctuation">:</span><span class="token operator">!</span>MD5<span class="token punctuation">;</span>  <span class="token keyword">ssl_prefer_server_ciphers</span> on<span class="token punctuation">;</span>  <span class="token keyword">ssl_session_timeout</span> 10m<span class="token punctuation">;</span>  <span class="token keyword">ssl_session_cache</span> builtin<span class="token punctuation">:</span><span class="token number">1000</span> shared<span class="token punctuation">:</span><span class="token keyword">SSL</span><span class="token punctuation">:</span>10m<span class="token punctuation">;</span>  ssl_buffer_size <span class="token number">1400</span><span class="token punctuation">;</span>  <span class="token keyword">add_header</span> Strict<span class="token operator">-</span>Transport<span class="token operator">-</span>Security max<span class="token operator">-</span>age<span class="token operator">=</span><span class="token number">15768000</span><span class="token punctuation">;</span>  ssl_stapling on<span class="token punctuation">;</span>  ssl_stapling_verify on<span class="token punctuation">;</span>  <span class="token keyword">server_name</span> domain<span class="token punctuation">.</span>com<span class="token punctuation">;</span>  <span class="token keyword">index</span> <span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token keyword">index</span><span class="token punctuation">.</span>htm <span class="token keyword">index</span><span class="token punctuation">.</span>php<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$ssl_protocol</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token number">301</span> <span class="token keyword">https</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token variable">$host</span><span class="token variable">$request_uri</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$host</span> <span class="token operator">!=</span> domain<span class="token punctuation">.</span>com<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token number">301</span> <span class="token keyword">https</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>domain<span class="token punctuation">.</span>com<span class="token variable">$request_uri</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">#location / {</span>  <span class="token comment" spellcheck="true">#  proxy_pass http://domain.com/nacos/;</span>  <span class="token comment" spellcheck="true">#}</span>  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>    <span class="token keyword">proxy_pass</span>  <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>nacos<span class="token operator">-</span><span class="token keyword">server</span><span class="token operator">/</span>nacos<span class="token operator">/</span><span class="token punctuation">;</span>    <span class="token keyword">proxy_redirect</span>      off<span class="token punctuation">;</span>    <span class="token keyword">proxy_set_header</span> Host <span class="token variable">$host</span><span class="token punctuation">;</span>    <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Real<span class="token operator">-</span>IP <span class="token variable">$remote_addr</span><span class="token punctuation">;</span>    <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>    <span class="token keyword">proxy_set_header</span> X<span class="token operator">-</span>Forwarded<span class="token operator">-</span>Proto <span class="token string">"http"</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>不要直接使用，这里有使用到https的证书，所以需要判断修改。</p></blockquote><h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><blockquote><p>程序下载的软件在本地搭建一个Nginx服务即可</p></blockquote><blockquote><p>这个是<strong>nginx.sh</strong>的内容：</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#/bin/sh</span><span class="token comment" spellcheck="true"># 创建目录文件</span><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /data/nginx/<span class="token punctuation">{</span>conf,logs,sites,ssl,html<span class="token punctuation">}</span><span class="token function">sudo</span> <span class="token function">rm</span> -rf /data/nginx/logs/*<span class="token comment" spellcheck="true"># 停止nginx-server的容器</span>docker stop nginx-server<span class="token comment" spellcheck="true"># 删除nginx-server的容器</span>docker <span class="token function">rm</span> nginx-server<span class="token comment" spellcheck="true"># 启动nginx-server的容器，并映射目录</span>docker run --hostname nginx-server --name nginx-server -p 80:80 -p 443:443 -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:ro -v /data/nginx/logs:/var/log/nginx -v /data/nginx/sites:/etc/nginx/conf.d -v /data/nginx/ssl:/etc/nginx/ssl -v /data/nginx/html:/usr/share/nginx/html:ro  -d nginx:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这个是<strong>/data/nginx/conf/nginx.conf</strong>的内容：</p></blockquote><pre class="line-numbers language-nginx"><code class="language-nginx"><span class="token keyword">user</span>  nginx<span class="token punctuation">;</span><span class="token keyword">worker_processes</span>  <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">error_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>error<span class="token punctuation">.</span>log warn<span class="token punctuation">;</span><span class="token keyword">pid</span>        <span class="token operator">/</span>var<span class="token operator">/</span>run<span class="token operator">/</span>nginx<span class="token punctuation">.</span><span class="token keyword">pid</span><span class="token punctuation">;</span><span class="token keyword">events</span> <span class="token punctuation">{</span>    <span class="token keyword">worker_connections</span>  <span class="token number">1024</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">http</span> <span class="token punctuation">{</span>    <span class="token keyword">include</span>       <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>mime<span class="token punctuation">.</span><span class="token keyword">types</span><span class="token punctuation">;</span>    <span class="token keyword">default_type</span>  application<span class="token operator">/</span>octet<span class="token operator">-</span>stream<span class="token punctuation">;</span>    <span class="token keyword">log_format</span>  main  <span class="token string">'$remote_addr - $remote_user [$time_local] "$request" '</span>                      <span class="token string">'$status $body_bytes_sent "$http_referer" '</span>                      <span class="token string">'"$http_user_agent" "$http_x_forwarded_for"'</span><span class="token punctuation">;</span>    <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>    <span class="token keyword">sendfile</span>        on<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#tcp_nopush     on;</span>    <span class="token keyword">keepalive_timeout</span>  <span class="token number">65</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">#gzip  on;</span>    <span class="token keyword">include</span> <span class="token operator">/</span>etc<span class="token operator">/</span>nginx<span class="token operator">/</span>conf<span class="token punctuation">.</span>d<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>conf<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这个是<strong>/data/nginx/sites/default.conf</strong>的内容：</p></blockquote><pre class="line-numbers language-nginx"><code class="language-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>    <span class="token keyword">listen</span>    <span class="token number">80</span><span class="token punctuation">;</span>    <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span>    <span class="token keyword">access_log</span>  <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>nginx<span class="token operator">/</span>host<span class="token punctuation">.</span>access<span class="token punctuation">.</span>log  main<span class="token punctuation">;</span>    <span class="token keyword">server_name</span>  localhost<span class="token punctuation">;</span>    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>        <span class="token keyword">root</span>   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>        <span class="token keyword">index</span>  <span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token keyword">index</span><span class="token punctuation">.</span>htm<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">error_page</span>   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html<span class="token punctuation">;</span>    <span class="token keyword">location</span> <span class="token operator">=</span> <span class="token operator">/</span><span class="token keyword">index</span><span class="token punctuation">.</span>html <span class="token punctuation">{</span>        <span class="token keyword">root</span>   <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>修改Nginx的配置之后我们要使修改的配置生效，直接使用<strong>docker exec -it nginx-server nginx -s reload</strong>在不重启容器的情况下让配置生效。<br>然后我们使用<strong>docker inspect nginx-server</strong>查看信息，获取IP。<br>将我们下载好的<strong>nacos-server-1.1.3.tar.gz</strong>放置到<strong>/data/nginx/html</strong>下，并修改相关的wget路径即可。这样就会让我们节约很多时间。不需要漫长的等待网络下载文件。</p></blockquote><h2 id="集群列表不显示"><a href="#集群列表不显示" class="headerlink" title="集群列表不显示"></a>集群列表不显示</h2><blockquote><p>在服务器上启动的时候发现不能正常展现集群节点，在线搜索一番发现需要配置一个<strong>nacos.server.ip=Local Ip</strong>这样的一个配置。<br>我们给启动脚本中添加一个配置<strong>NACOS_SERVER_IP=当前机器IP</strong></p></blockquote><hr><blockquote><p>自己搭建不能显示集群列表的原因：不能修改“<strong>server.contextPath=/nacos、server.servlet.contextPath=/nacos为server.contextPath=/、server.servlet.contextPath=/</strong>”</p></blockquote><h2 id="成品展示"><a href="#成品展示" class="headerlink" title="成品展示"></a>成品展示</h2><blockquote><p>目前配置完成的地址为：<a href="https://nacos.freegou.tech" target="_blank" rel="noopener">https://nacos.freegou.tech</a><br>账户名称：nacos<br>账户密码：nacos</p></blockquote><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">UPDATE</span> <span class="token punctuation">`</span>nacos_config<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>users<span class="token punctuation">`</span> <span class="token keyword">SET</span> <span class="token punctuation">`</span>password<span class="token punctuation">`</span> <span class="token operator">=</span> <span class="token string">'$2a$10$E/wOWsXoXMsOmAOf/aPcIuTJQc5VLumaU.46nOduWeQvyaAfUkhdC'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://blog.csdn.net/weixin_41465338/article/details/80106747" target="_blank" rel="noopener">Dockerfile常用指令详解</a></li><li><a href="https://www.cnblogs.com/linjiqin/p/8735230.html" target="_blank" rel="noopener">Dockerfile指令详解</a></li><li><a href="https://www.wandouip.com/t5i278697/" target="_blank" rel="noopener">关于使用Nacos集群遇到问题 – code:503 msg: server is STARTIN</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;软件环境&quot;&gt;&lt;a href=&quot;#软件环境&quot; class=&quot;headerlink&quot; title=&quot;软件环境&quot;&gt;&lt;/a&gt;软件环境&lt;/h2&gt;&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;OS：Ubuntu Server 16.04.1 LTS 64位&lt;/li&gt;
&lt;li&gt;Docker：19.03.1&lt;/li&gt;
&lt;li&gt;Nacos Server：1.1.3&lt;ul&gt;
&lt;li&gt;nacos-sever-01：172.17.0.7 &lt;/li&gt;
&lt;li&gt;nacos-sever-02：172.17.0.8&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;文件目录：&lt;ul&gt;
&lt;li&gt;/data/nacos/{cluster1,cluster2}/{data,conf,logs}&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;学习目的&quot;&gt;&lt;a href=&quot;#学习目的&quot; class=&quot;headerlink&quot; title=&quot;学习目的&quot;&gt;&lt;/a&gt;学习目的&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;学会自己构建&lt;strong&gt;Nacos Server&lt;/strong&gt;，不依赖官方的&lt;strong&gt;nacos/nacos-server:last&lt;/strong&gt;镜像。&lt;br&gt;参考了很多别人构建的镜像&lt;a href=&quot;https://hub.docker.com/search?q=nacos&amp;type=image&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://hub.docker.com/search?q=nacos&amp;amp;type=image&lt;/a&gt;，发现别人写的都很简单。但是自己的始终不能像其他人一样简单的运行起来。&lt;br&gt;比如下面的例子：&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
      <category term="nacos" scheme="https://kany.me/tags/nacos/"/>
    
      <category term="nacos-server" scheme="https://kany.me/tags/nacos-server/"/>
    
      <category term="注册中心" scheme="https://kany.me/tags/%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83/"/>
    
  </entry>
  
  <entry>
    <title>Docker使用MariaDB数据库</title>
    <link href="https://kany.me/2019/09/12/docker-install-mariadb/"/>
    <id>https://kany.me/2019/09/12/docker-install-mariadb/</id>
    <published>2019-09-12T07:38:40.000Z</published>
    <updated>2019-09-18T08:13:19.022Z</updated>
    
    <content type="html"><![CDATA[<h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><blockquote><p>上一篇文章在虚拟机上成功的安装了Docker容器，但是我有偷偷的重新弄了一个新的Docker版本。<br>环境详情如下：</p><ul><li>OS：Ubuntu Server 16.04.1 LTS 64位</li><li>Docker：19.03.1</li></ul></blockquote><h2 id="获取MariaDB镜像"><a href="#获取MariaDB镜像" class="headerlink" title="获取MariaDB镜像"></a>获取MariaDB镜像</h2><blockquote><p>在运行Docker容器的时候，如本地不存在指定镜像，会去<a href="https://hub.docker.com" target="_blank" rel="noopener">Docker的镜像站</a>去拉取镜像，所以我们可以不拉取。</p></blockquote><a id="more"></a><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 搜索镜像文件</span>docker search mariadb<span class="token comment" spellcheck="true"># 拉取镜像文件</span><span class="token comment" spellcheck="true"># docker pull mariadb:version</span>docker pull mariadb:last<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="创建运行命令"><a href="#创建运行命令" class="headerlink" title="创建运行命令"></a>创建运行命令</h2><blockquote><p>关于MariaDB镜像的详细信息可以在<a href="https://hub.docker.com/_/mariadb" target="_blank" rel="noopener">https://hub.docker.com/_/mariadb</a>中看到。这里直接上使用的命令</p></blockquote><p><code>MariaDB：</code></p><pre class="line-numbers language-bash"><code class="language-bash">docker run --name mariadb -p 3306:3306 -v /data/mariadb/conf:/etc/mysql/conf.d -v /data/mariadb/logs:/var/log/mysql -v /data/mariadb/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD<span class="token operator">=</span>数据库密码 -d mariadb:latest --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>MySQL：</code></p><pre class="line-numbers language-bash"><code class="language-bash">docker run --name mysql -p 3306:3306 -v /data/mariadb/conf:/etc/mysql/conf.d -v /data/mariadb/logs:/var/log/mysql -v /data/mariadb/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD<span class="token operator">=</span>数据库密码 -d mysql:latest --character-set-server<span class="token operator">=</span>utf8mb4 --collation-server<span class="token operator">=</span>utf8mb4_unicode_ci<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>–name 指定运行容器名称，我这里定义的是 mariadb<br>-p 指定宿主机与容器间的端口映射<br>-v 数据卷，将宿主机的<code>/data/mariadb/data</code>映射到容器<code>/var/lib/mysql</code><br>-d 后台运行</p></blockquote><p>上面的参数根据镜像的不同而不同，具体有多少参数请查询上面的链接。-v /data/mariadb/conf:/etc/mysql/conf.d这个是官方给的配置，我进入容器中查看好像使用-v /data/mariadb/conf:/etc/mysql会好点。</p><h2 id="备份数据库"><a href="#备份数据库" class="headerlink" title="备份数据库"></a>备份数据库</h2><pre class="line-numbers language-bash"><code class="language-bash">docker <span class="token function">exec</span> mariadb sh -c <span class="token string">'exec mysqldump --all-databases -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">></span> /data/mariadb/all_databases.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="恢复数据库"><a href="#恢复数据库" class="headerlink" title="恢复数据库"></a>恢复数据库</h2><pre class="line-numbers language-bash"><code class="language-bash">docker <span class="token function">exec</span> -i some-mariadb sh -c <span class="token string">'exec mysql -uroot -p"<span class="token variable">$MYSQL_ROOT_PASSWORD</span>"'</span> <span class="token operator">&lt;</span> /data/mariadb/all_databases.sql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>备份和恢复如此的简单，感觉还是不错的。</p></blockquote><h2 id="进入正在运行的容器"><a href="#进入正在运行的容器" class="headerlink" title="进入正在运行的容器"></a>进入正在运行的容器</h2><blockquote><p>在参考资料里面有提到4种方式，但是我自己还是喜欢<strong>docker exec -it 容器ID /bin/bash</strong>，但是大家要查询容器信息还是建议使用<code>docker inspect 容器ID</code></p></blockquote><h2 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h2><blockquote><p>在网上看到一个保存windows 10系统激活Key的命令，懒得开单章了，直接弄个题外话</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash">wmic path softwarelicensingservice get OA3xOriginalProductKey<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://hub.docker.com" target="_blank" rel="noopener">Docker官方镜像站点</a></li><li><a href="https://www.cnblogs.com/bethal/p/5945015.html" target="_blank" rel="noopener">Docker常用命令</a></li><li><a href="https://www.runoob.com/docker/docker-command-manual.html" target="_blank" rel="noopener">Docker 命令大全</a></li><li><a href="https://www.cnblogs.com/cblogs/p/dockerCommand.html" target="_blank" rel="noopener">Docker常用命令汇总，和常用操作举例</a></li><li><a href="https://blog.csdn.net/u010820857/article/details/83784687" target="_blank" rel="noopener">进入正在运行的Docker容器的4种方式</a></li><li><a href="https://www.toutiao.com/a6724497689175654915" target="_blank" rel="noopener">备份序列号</a></li><li><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/repositories" target="_blank" rel="noopener">阿里云免费Docker镜像</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;背景介绍&quot;&gt;&lt;a href=&quot;#背景介绍&quot; class=&quot;headerlink&quot; title=&quot;背景介绍&quot;&gt;&lt;/a&gt;背景介绍&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;上一篇文章在虚拟机上成功的安装了Docker容器，但是我有偷偷的重新弄了一个新的Docker版本。&lt;br&gt;环境详情如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;OS：Ubuntu Server 16.04.1 LTS 64位&lt;/li&gt;
&lt;li&gt;Docker：19.03.1&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;获取MariaDB镜像&quot;&gt;&lt;a href=&quot;#获取MariaDB镜像&quot; class=&quot;headerlink&quot; title=&quot;获取MariaDB镜像&quot;&gt;&lt;/a&gt;获取MariaDB镜像&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;在运行Docker容器的时候，如本地不存在指定镜像，会去&lt;a href=&quot;https://hub.docker.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Docker的镜像站&lt;/a&gt;去拉取镜像，所以我们可以不拉取。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
      <category term="database" scheme="https://kany.me/tags/database/"/>
    
      <category term="mariadb" scheme="https://kany.me/tags/mariadb/"/>
    
      <category term="mysql" scheme="https://kany.me/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>在Ubuntu 16.04 安装 Docker</title>
    <link href="https://kany.me/2019/09/11/docker-install/"/>
    <id>https://kany.me/2019/09/11/docker-install/</id>
    <published>2019-09-11T10:09:06.000Z</published>
    <updated>2019-09-12T07:45:17.709Z</updated>
    
    <content type="html"><![CDATA[<h2 id="使用脚本自动安装-（仅适用于公网环境）"><a href="#使用脚本自动安装-（仅适用于公网环境）" class="headerlink" title="使用脚本自动安装 （仅适用于公网环境）"></a>使用脚本自动安装 （仅适用于公网环境）</h2><pre class="line-numbers language-bash"><code class="language-bash">curl -fsSL https://get.docker.com <span class="token operator">|</span> <span class="token function">bash</span> -s docker --mirror Aliyun<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="手动安装"><a href="#手动安装" class="headerlink" title="手动安装"></a>手动安装</h2><blockquote><p>上面介绍了如何使用官方脚本自动安装Docker，下面使用手动当时来进行配置</p></blockquote><h3 id="修改镜像源"><a href="#修改镜像源" class="headerlink" title="修改镜像源"></a>修改镜像源</h3><blockquote><p>无论是使用何种系统，在国内想要速度快都要修改为国内的加速镜像</p></blockquote><a id="more"></a><p>Ubuntu 16.04（xenial ） 配置如下</p><pre class="line-numbers language-bash"><code class="language-bash">deb http://mirrors.aliyun.com/ubuntu/ xenial maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial maindeb http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security universe<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>CentOS 7</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup<span class="token comment" spellcheck="true"># CentOS 7</span><span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo<span class="token comment" spellcheck="true"># CentOS 6</span><span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-6.repo<span class="token comment" spellcheck="true"># CentOS 5</span><span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-5.repo<span class="token comment" spellcheck="true"># 清理缓存</span>yum makecache<span class="token comment" spellcheck="true"># 更新yum</span>yum -y update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这里的配置可以打开参考资料的阿里云镜像站。</p></blockquote><h3 id="Ubuntu-配置"><a href="#Ubuntu-配置" class="headerlink" title="Ubuntu 配置"></a>Ubuntu 配置</h3><blockquote><p>实际上在下面的命令中已经有了添加源地址的操作</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># step 1: 安装必要的一些系统工具</span><span class="token function">sudo</span> <span class="token function">apt-get</span> update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> apt-transport-https ca-certificates curl software-properties-common<span class="token comment" spellcheck="true"># step 2: 安装GPG证书</span>curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add -<span class="token comment" spellcheck="true"># Step 3: 写入软件源信息</span><span class="token function">sudo</span> add-apt-repository <span class="token string">"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span><span class="token comment" spellcheck="true"># Step 4: 更新并安装 Docker-CE</span><span class="token function">sudo</span> <span class="token function">apt-get</span> -y update<span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> docker-ce注意：其他注意事项在下面的注释中<span class="token comment" spellcheck="true"># 安装指定版本的Docker-CE:</span><span class="token comment" spellcheck="true"># Step 1: 查找Docker-CE的版本:</span>apt-cache madison docker-ce<span class="token comment" spellcheck="true"># 执行后得到如下结果</span><span class="token comment" spellcheck="true"># docker-ce | 18.06.3~ce~3-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 18.06.2~ce~3-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 18.06.1~ce~3-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 18.06.0~ce~3-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 18.03.1~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 18.03.0~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.12.1~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.12.0~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.09.1~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.09.0~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.06.2~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.06.1~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.06.0~ce-0~ubuntu | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true">#docker-ce | 17.03.2~ce-0~ubuntu-trusty | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.03.1~ce-0~ubuntu-trusty | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># docker-ce | 17.03.0~ce-0~ubuntu-trusty | https://mirrors.aliyun.com/docker-ce/linux/ubuntu/ trusty/stable amd64 Packages</span><span class="token comment" spellcheck="true"># Step 2: 安装指定版本的Docker-CE: (VERSION 例如上面的 18.06.3~ce~3-0~ubuntu)</span><span class="token comment" spellcheck="true"># sudo apt-get -y install docker-ce=[VERSION]</span><span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> docker-ce<span class="token operator">=</span>18.06.3~ce~3-0~ubuntu<span class="token comment" spellcheck="true"># 通过经典网络、VPC网络内网安装时，用以下命令替换Step 2、Step 3中的命令</span><span class="token comment" spellcheck="true"># 经典网络：</span>curl -fsSL http://mirrors.aliyuncs.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add -<span class="token function">sudo</span> add-apt-repository <span class="token string">"deb [arch=amd64] http://mirrors.aliyuncs.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span><span class="token comment" spellcheck="true"># VPC网络：</span>curl -fsSL http://mirrors.cloud.aliyuncs.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add -<span class="token function">sudo</span> add-apt-repository <span class="token string">"deb [arch=amd64] http://mirrors.cloud.aliyuncs.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="CentOS-配置"><a href="#CentOS-配置" class="headerlink" title="CentOS 配置"></a>CentOS 配置</h3><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># step 1: 安装必要的一些系统工具</span><span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2<span class="token comment" spellcheck="true"># Step 2: 添加软件源信息</span><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span class="token comment" spellcheck="true"># Step 3: 更新并安装 Docker-CE</span><span class="token function">sudo</span> yum makecache fast<span class="token function">sudo</span> yum -y <span class="token function">install</span> docker-ce<span class="token comment" spellcheck="true"># Step 4: 开启Docker服务</span><span class="token function">sudo</span> <span class="token function">service</span> docker start注意：其他注意事项在下面的注释中<span class="token comment" spellcheck="true"># 官方软件源默认启用了最新的软件，您可以通过编辑软件源的方式获取各个版本的软件包。例如官方并没有将测试版本的软件源置为可用，你可以通过以下方式开启。同理可以开启各种测试版本等。</span><span class="token comment" spellcheck="true"># vim /etc/yum.repos.d/docker-ce.repo</span><span class="token comment" spellcheck="true">#   将 [docker-ce-test] 下方的 enabled=0 修改为 enabled=1</span><span class="token comment" spellcheck="true">#</span><span class="token comment" spellcheck="true"># 安装指定版本的Docker-CE:</span><span class="token comment" spellcheck="true"># Step 1: 查找Docker-CE的版本:</span><span class="token comment" spellcheck="true"># yum list docker-ce.x86_64 --showduplicates | sort -r</span><span class="token comment" spellcheck="true">#   Loading mirror speeds from cached hostfile</span><span class="token comment" spellcheck="true">#   Loaded plugins: branch, fastestmirror, langpacks</span><span class="token comment" spellcheck="true">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            docker-ce-stable</span><span class="token comment" spellcheck="true">#   docker-ce.x86_64            17.03.1.ce-1.el7.centos            @docker-ce-stable</span><span class="token comment" spellcheck="true">#   docker-ce.x86_64            17.03.0.ce-1.el7.centos            docker-ce-stable</span><span class="token comment" spellcheck="true">#   Available Packages</span><span class="token comment" spellcheck="true"># Step2 : 安装指定版本的Docker-CE: (VERSION 例如 18.06.3~ce~3-0~ubuntu)</span><span class="token comment" spellcheck="true"># sudo yum -y install docker-ce-[VERSION]</span><span class="token comment" spellcheck="true"># 注意：在某些版本之后，docker-ce安装出现了其他依赖包，如果安装失败的话请关注错误信息。例如 docker-ce 17.03 之后，需要先安装 docker-ce-selinux。</span><span class="token comment" spellcheck="true"># yum list docker-ce-selinux- --showduplicates | sort -r</span><span class="token comment" spellcheck="true"># sudo yum -y install docker-ce-selinux-[VERSION]</span><span class="token comment" spellcheck="true"># 通过经典网络、VPC网络内网安装时，用以下命令替换Step 2中的命令</span><span class="token comment" spellcheck="true"># 经典网络：</span><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo<span class="token comment" spellcheck="true"># VPC网络：</span><span class="token function">sudo</span> yum-config-manager --add-repo http://mirrors.could.aliyuncs.com/docker-ce/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这里是抄袭的，Ubuntu的验证了，CentOS的没有验证</p></blockquote><h2 id="配置用户"><a href="#配置用户" class="headerlink" title="配置用户"></a>配置用户</h2><blockquote><p>非root用户是不能直接使用<code>docker version</code>这个命令的，需要执行：<code>sudo usermod -aG docker %USER%</code><br>例如当前用户“ubuntu”，那么就是：<code>sudo usermod -aG docker ubuntu</code><br>然后退出登录，就可以正常执行了。</p></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># If you would like to use Docker as a non-root user, you should now consider</span><span class="token comment" spellcheck="true"># adding your user to the "docker" group with something like:</span><span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker ubuntu<span class="token comment" spellcheck="true"># Remember that you will have to log out and back in for this to take effect!</span><span class="token comment" spellcheck="true"># WARNING: Adding a user to the "docker" group will grant the ability to run</span><span class="token comment" spellcheck="true">#         containers which can be used to obtain root privileges on the docker host.</span><span class="token comment" spellcheck="true">#         Refer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface</span><span class="token comment" spellcheck="true">#         for more information.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>然后执行<strong>docker version</strong></p></blockquote><pre class="line-numbers language-bash"><code class="language-bash">Client: Version:           18.06.3-ce API version:       1.38 Go version:        go1.10.3 Git commit:        d7080c1 Built:             Wed Feb 20 02:27:13 2019 OS/Arch:           linux/amd64 Experimental:      <span class="token boolean">false</span>Server: Engine:  Version:          18.06.3-ce  API version:      1.38 <span class="token punctuation">(</span>minimum version 1.12<span class="token punctuation">)</span>  Go version:       go1.10.3  Git commit:       d7080c1  Built:            Wed Feb 20 02:25:38 2019  OS/Arch:          linux/amd64  Experimental:     <span class="token boolean">false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="添加加速镜像"><a href="#添加加速镜像" class="headerlink" title="添加加速镜像"></a>添加加速镜像</h2><blockquote><p>修改Docker镜像加速站点有下列方式：</p><ul><li>使用命令来配置加速站点</li></ul></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;</span>-<span class="token string">'EOF'</span><span class="token punctuation">{</span>    <span class="token string">"registry-mirrors"</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">"&lt;your accelerate address>"</span><span class="token punctuation">]</span>    <span class="token string">"insecure-registries"</span><span class="token keyword">:</span> <span class="token punctuation">[</span><span class="token string">"其他的加速器"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ul><li>使用脚本来配置加速站点（该脚本可以将 –registry-mirror 加入到你的 Docker 配置文件 /etc/docker/daemon.json 中。适用于 Ubuntu14.04、Debian、CentOS6 、CentOS7、Fedora、Arch Linux、openSUSE Leap 42.1，其他版本可能有细微不同。更多详情请访问文档。）</li></ul></blockquote><pre class="line-numbers language-bash"><code class="language-bash">curl -sSL https://raw.githubusercontent.com/wss434631143/xiaoshujiang/master/articles/Docker/shell/set_mirror.sh <span class="token operator">|</span> sh -s <span class="token operator">&lt;</span>your accelerate address<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><ul><li>通过修改启动脚本配置加速站点(这个是修改启动脚本，每个启动脚本的位置可能不同，需要注意)</li></ul></blockquote><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">vi</span> /lib/systemd/system/docker.serviceExecStart<span class="token operator">=</span>/usr/bin/dockerd --registry-mirror<span class="token operator">=</span><span class="token operator">&lt;</span>your accelerate address<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul><li><a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">阿里云镜像站</a></li><li><a href="https://docs.docker.com/install/" target="_blank" rel="noopener">Docker Guides</a></li><li><a href="https://www.jianshu.com/p/d838b04a0d2f" target="_blank" rel="noopener">修改Linux软件源</a></li><li><a href="https://yq.aliyun.com/articles/29941" target="_blank" rel="noopener">Docker 镜像加速器</a></li><li><a href="https://yq.aliyun.com/articles/110806" target="_blank" rel="noopener">Docker CE 镜像源站</a></li><li><a href="https://www.cnblogs.com/wushuaishuai/p/9984228.html" target="_blank" rel="noopener">Docker 国内仓库和镜像</a></li><li><a href="https://blog.csdn.net/nklinsirui/article/details/80490537" target="_blank" rel="noopener">Docker国内Yum源和国内镜像仓库</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;使用脚本自动安装-（仅适用于公网环境）&quot;&gt;&lt;a href=&quot;#使用脚本自动安装-（仅适用于公网环境）&quot; class=&quot;headerlink&quot; title=&quot;使用脚本自动安装 （仅适用于公网环境）&quot;&gt;&lt;/a&gt;使用脚本自动安装 （仅适用于公网环境）&lt;/h2&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;手动安装&quot;&gt;&lt;a href=&quot;#手动安装&quot; class=&quot;headerlink&quot; title=&quot;手动安装&quot;&gt;&lt;/a&gt;手动安装&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;上面介绍了如何使用官方脚本自动安装Docker，下面使用手动当时来进行配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;修改镜像源&quot;&gt;&lt;a href=&quot;#修改镜像源&quot; class=&quot;headerlink&quot; title=&quot;修改镜像源&quot;&gt;&lt;/a&gt;修改镜像源&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;无论是使用何种系统，在国内想要速度快都要修改为国内的加速镜像&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
    
    
      <category term="docker" scheme="https://kany.me/tags/docker/"/>
    
      <category term="dockerfile" scheme="https://kany.me/tags/dockerfile/"/>
    
      <category term="database" scheme="https://kany.me/tags/database/"/>
    
      <category term="mariadb" scheme="https://kany.me/tags/mariadb/"/>
    
      <category term="mysql" scheme="https://kany.me/tags/mysql/"/>
    
  </entry>
  
</feed>
